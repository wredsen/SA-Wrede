\chapter{Einleitung}
% Ab hier arabische Seitenzählung und heading Seitenstil
\pagestyle{scrheadings}
\pagenumbering{arabic}
\setcounter{page}{1}

In einer Vielzahl heutiger industrieller Anwendungen wird eine zentrale Organisation zur Steuerung von Geräten im Kontext des Internets der Dinge\footnote{„Mit dem „Internet der Dinge“ (engl.: Internet of things, IoT) oder „Allesnetz“ wird die Vernetzung von 
Gegenständen mit dem Internet verstanden, so dass diese Gegenstände über das Internet 
selbstständig kommunizieren und einen Material- oder Produktionsfluss festlegen.'' \cite{BegriffeIndustrie40}} und deren Kollaboration eingesetzt. Das agile Zusammenarbeiten einzelner Teilsysteme verspricht eine besonders hohe Flexibilität und Anpassungsfähigkeit von Produktionsprozessen. Allerdings sind die IoT-Geräte aufgrund des zentralen Ansatzes auch in hohem Maße von der Verfügbarkeit und Verlässlichkeit ihrer Verbindung zur Steuerung abhängig. Gerade bei mobilen Geräten stellt die drahtlose Kommunikation auf den letzten Metern eine enorme Herausforderung dar.

Im Rahmen vorangegangener studentischer Arbeiten ist am Fraunhofer-Institut für Integrierte Schaltungen IIS, Institutsteil Entwicklung Adaptiver Systeme EAS \cite{fraunhoferIISEAS} in Dresden ein Demonstratorsystem entwickelt worden. Mit diesem System sollen perspektivisch Regelungsstrategien auf verteilten Recheneinheiten gegenüber einer zentralen Messgrößenverarbeitung und Stellgrößenberechnung verglichen werden. Außerdem ist es möglich, damit den Einfluss von Störungen und Verzögerungen der (drahtlosen) Kommunikation zwischen den Recheneinheiten zu evaluieren.

Aufgabe dieser Studienarbeit war es, eine analytische Modellbildung des Versuchsstands durchzuführen sowie eine zentrale Referenzregelstrategie ohne Verteilung auf verschiedene Recheneinheiten für das Demonstratorsystem zu entwerfen. Zudem waren die dabei ermittelten Ansätze zur Steuerung und Folgeregelung simulativ zu verifizieren.

Da es sich beim Demonstrator um ein mechanisches Starrkörpersystem handelt, bietet sich eine kinetische Beschreibung des Systems mittels des Lagrange-Formalismus an. Die Systemgleichungen eines solchen nichtlinearen Mehrgrößensystems können auf die Eigenschaft der differentiellen Flachheit untersucht werden. Daraus kann bei erfolgreichem Nachweis eine flachheitsbasierte Trajektorienplanung der Ausgangsgrößen und Parametrisierung der Stellgrößen dadurch erfolgen. Die Korrektur von Abweichungen von den Referenzverläufen ist durch eine ebenfalls flachheitsbasierte Folgeregelung möglich.

\chapter{System- und Problembeschreibung}

\section{Aufbau des Demonstratorsytems}

\begin{figure}[ht]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=0.55]{Pictures/Veritas_demo_CAD.png}
	\end{center}
	\caption[Konstruktionsmodell des Doppelkransystems]
	{Konstruktionsmodell des Doppelkran-Demonstratorsystems ohne Verkabelung.}
	\label{fig:demonstrator_CAD}
\end{figure}

Das Demonstratorsystem besteht aus zwei Brückenkränen, die eine gemeinsame Last in der vertikalen Ebene anheben. Abbildung \ref{fig:demonstrator_CAD} stellt ein Modell des Aufbaus dar, das während des Konstruktionsprozesses entstanden ist. Die Kräne befinden sich auf zwei horizontalen Führungsschienen und verfügen jeweils \footnote{Diese Anordnung erlaubt eine Architektur verteilter Systeme. Im Rahmen dieser Studienarbeit wird allerdings nur ein zentraler Regelungsansatz, also die effektive Nutzung einer Recheneinheit, verfolgt.} über einen Raspberry Pi 4B\footnote{Spezifikationen: 8GB DDR4 RAM, 64-bit ARM64 SoC, 5.0 GHz WLAN, Bluetooth 5.0, BLE, Gigabit Ethernet; Betriebsystem: Ubuntu 20.04 \cite{RpiSpecs}} als Hauptrecheneinheit sowie einen STM32-Mikrocontroller\footnote{Spezifikationen: STM32F303K8 mit 32-bit Arm Cortex-M4, 64 kB Flash-Speicher, 12-bit ADCs \cite{STM32Specs}} für die Motoransteuerungen und Messungen. Beide Raspberry Pis können über eine LAN-Verbindung miteinander kommunizieren. Die Kräne sind als Laufkatzen entlang der Schienen sowie Seilwinden darauf mit jeweils einem Gleichstrommotor aktuiert. Auf den STM32-Mikrocontrollern ist bereits eine unterlagerte Strom- beziehungsweise Kraftregelung für diese Motoren implementiert.
Messungen der Seillängen und Kranpositionen auf der Schiene erfolgen mittels Inkrementalgebern nach einem anfänglichen Kalibrierungsvorgang. Die Seilwinkel zur Horizontalen werden mittels mitschwingender Potentiometer bestimmt. Abbildung~\ref{fig:demonstrator_real} zeigt eine Fotografie der realen Anordnung des Demonstrators.

\begin{figure}[ht]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=0.11]{Pictures/real_gantry.jpg}
	\end{center}
	\caption[Doppelkran-Demonstratorsystem mit Laufkatzen und Last]
	{Anordnung des Doppelkran-Demonstratorsystems mit Laufkatzen und Last am Versuchsstand.}
	\label{fig:demonstrator_real}
\end{figure}

\section{Problembeschreibung und Zielsetzung}
Bei der Bewegung von Containern in Häfen ist ein ruckarmer und gegenüber der Horizontalen stabiler Transport notwendig. Ziel dieser Studienarbeit ist es deshalb, für das vorhandene Demonstratorsystems eine zentrale Referenzregelstrategie zu entwerfen. Damit soll unter Vorgabe von Sollposen eine Planung von Trajektorien der Last in ihrer vertikalen Aufhängungsebene und eine Folgeregelung zur Überführung der Last zwischen verschiedenen Ruhelagen ermöglicht werden. Diese Überlegungen sollen auf Basis einer Modellierung des Krans als Mehrkörpersystem geschehen. 

Perspektivisch soll diese zentrale Referenzregelstrategie einerseits zum Vergleich mit zukünftig zu entwickelnden verteilten Regelungsansätzen genutzt werden sowie andererseits als Grundlage für den Einsatz von Methoden des maschinellen Lernens dienen. Dabei ist es von Interesse zu untersuchen, ob etwa durch bestärkendes Lernen unter der Vorgabe von flachheitsbasierten Referenztrajektorien im Lernprozess ein künstliches neuronales Netz generiert werden kann, welches eine vergleichbar gute Regelung im Normalfall bietet, allerdings Vorteile in beispielsweise Robustheit und Adaptivität aufweist.

\chapter{Analytische Modellbildung}

\section{Allgemeine Modellannahmen}

In der folgenden Modellierung wird das Demonstratorsystem nur planar betrachtet, also die Bewegung aller Komponenten nur in der vertikalen Ebene berücksichtigt. Diese Annahme ist gerechtfertigt, weil die Laufkatzen nur entlang einer Achse verfahren können und die Lagerung bzw. Aufhängung der Last ein Schwingen senkrecht zur vertikalen Ebene unterdrückt. Die Seile werden aufgrund ihrer geringen Dicke als masselos im Vergleich zu den Laufkatzen sowie der Last angenommen und somit auch nicht mit einem Trägheitsmoment versehen. Die Last wird trotz ihrer Aussparungen (siehe Abbildung~\ref{fig:demonstrator_real}) mit einer homogenen Masseverteilung modelliert. Für eine genauere Beschreibung wären Konstruktionsdaten oder eine Demontage mit Vermessung der Teilkomponenten notwendig. Zur Reduktion weiterer Komplexität werden dissipative Kräfte im Modell nicht berücksichtigt.

Die Modellbildung erfolgt in mehreren Stufen. Zunächst wird mittels der Lagrange-Gleichungen zweiter Art ein Einzelkran modelliert. Das Modell liegt dann in Form eines gewöhnlichen Differenzialgleichungssystems (DGL-System, engl. ODE system) vor. Die Lagrange-Gleichungen erster Art geben die geschlossene kinematische Kette der durch die Last verbundenen Laufkatzen des Doppelkrans intuitiv wider, so dass ein differenzial-algebraisches Gleichungssystem (DAE-System, von engl. differential algebraic equations) entsteht. In der Arbeit hat sich allerdings gezeigt, dass die Lagrange-Gleichungen zweiter Art eine kompliziertere Formulierung der Hubaktuierung sowie aufwändigere Lösungsalgorithmen erfordern. Um das Prinzipielle Vorgehen zur Herleitung eines DAE-Modells dennoch zu schildern, wird es auf den Doppelkran angewendet. Ausgehend vom Einzelkransystem kann die prinzipielle Methodik der Modellbildung verifiziert werden und ein Transfer der Erkenntnisse auf die Modellierung des Doppelkransystems erfolgen.

\section{Modellierung mittels Lagrange-Formalismus}
Die Dynamik mechanischer Systeme lässt sich über Differenzialgleichungen, den sogenannten Lagrange-Gleichungen (LG) beschreiben. Dabei wird eine Menge aus $n$ zeitlich veränderlichen Koordinaten als Konfigurationskoordinaten oder Systemgrößen $\boldsymbol{\theta} = (\theta_1, ..., \theta_n)^T$ bezeichnet. Deren zeitliche Änderungsraten werden im Vektor der Konfigurationsgeschwindigkeiten $\dot{\boldsymbol{\theta}}$ zusammengefasst. In \cite[S.10]{DissKnoll} wird eine Unterteilung der der Konfigurationskoordinaten $\boldsymbol{\theta} = (\mathbf{q}, \mathbf{p})^T$ in ``aktive'' Koordinaten $\mathbf{q}$ und ``passive'' Koordinaten $\mathbf{p}$ vorgenommen. In Anlehnung daran wird in dieser Arbeit eine Aufteilung der Systemgrößen in die direkt aktuierten Koordinaten $\mathbf{q}$ und nicht direkt aktuierten Koordinaten $\mathbf{p}$ durchgeführt. \cite[S.7]{DissKnoll} 

Die kinetische Energie eines Systems wird im Folgenden durch die Funktion $T$ sowie die potentielle Energie durch $V$ beschrieben. Die Lagrange-Funktion kann damit folgendermaßen definiert werden:
\begin{equation}
\mathcal{L}(\boldsymbol{\theta}, \dot{\boldsymbol{\theta}}) = T(\boldsymbol{\theta}, \dot{\boldsymbol{\theta}}) - V(\boldsymbol{\theta}).
\end{equation}

Eine automatisierte Generierung von Systemgleichungen aus den Energiefunktionen ist unter Nutzung des Python-Pakets symbtools \cite{symbtools} möglich.

\subsection{Lagrange-Gleichungen erster Art}
\label{sec:Lagrange1_theory}

Mit den LG erster Art können Problemstellungen mit Zwangsbedingungen (ZB) und -kräften abgebildet werden:
\begin{equation}
	\label{eq:lagrange1}
	\diff{}{t}\left(\partiell{\mathcal{L}}{\dot{\theta}_i} \right) - \partiell{\mathcal{L}}{\theta_i} = \tilde{Q}_i + Q_i, \quad i = 1, ..., n.
\end{equation}
Die sich auf die jeweilige Koordinate $\theta_i$ beziehende Stellkraft $Q_i = f_i - D_i$ entspricht der verallgemeinerten Kraft, welche sich aus der äußeren (Stell-)Kraft $f_i$ sowie internen Reibungskraft $D_i$ zusammensetzt \cite[S. 49]{Lagrange}.

Weiterhin können $m$ holonome ZB $a_1(\boldsymbol{\theta}) = ... = a_m(\boldsymbol{\theta}) = 0$ eingeführt werden, aus denen die Zwangskraft $\tilde{Q}_i$ in Richtung der Koordinate $\theta_i$ folgt:
\begin{equation}
	\tilde{Q}_i = \sum_{j = 1}^m \lambda_j \partiell{a_j}{\theta_i}.
\end{equation}
In dieser Beziehung bezeichnet $\lambda_j$ den jeweiligen Lagrange-Multiplikator.

\subsection{Lagrange-Gleichungen zweiter Art}
\label{sec:Lagrange2_theory}
Die LG zweiter Art beschreiben bezüglich der LG erster Art den Spezialfall ohne ZB, also $m = 0$. Zwangskräfte sind dabei nicht explizit zu bestimmen. Als Voraussetzung müssen die Konfigurationskoordinaten unabhängig voneinander sein, es darf also keine ZB geben, die diese verkoppeln. In diesem Zusammenhang spricht man auch von den Minimalkoordinaten $\boldsymbol{\theta}$. Dann können die Bewegungsgleichungen folgendermaßen aus der Lagrange-Funktion abgeleitet werden:
\begin{equation}
	\label{eq:lagrange2}
	\diff{}{t}\left(\partiell{\mathcal{L}}{\dot{\theta}_i} \right) - \partiell{\mathcal{L}}{\theta_i} = Q_i, \quad i = 1, ..., n.
\end{equation}
Zur Bestimmung der Komponenten $Q_i$ der verallgemeinerten Kraft wird das Prinzip der virtuellen Arbeit herangezogen \cite{VirtualWork}:
\begin{equation}
	\delta W = \sum_{k=1}^l \mathbf{F}_k \cdot \frac{\partial \mathbf{r}_k}{\partial \theta_1} \delta \theta_1 +\ldots + \sum_{k=1}^l \mathbf{F}_k \cdot \frac{\partial \mathbf{r}_k}{\partial \theta_n} \delta \theta_n.
\end{equation}
Dabei entspricht $\mathbf{r}_k$ bei einem System aus $l$ (massebehafteten) Teilchen dem Richtungsvektor zum $k$-ten Partikel und $\mathbf{F}_k$ der jeweils entlang dieses Richtungsvektors angewandten Stellkraft. Die virtuelle Verschiebung des Partikels im Raum $\delta \mathbf{r}_{k}$ und die virtuelle Verschiebung $\delta \theta_{i}$ der Koordinate $\theta_i$ genügen der Beziehung:
\begin{equation}
	\delta \mathbf{r}_{k} = \sum_{i = 1}^{n} \partiell{\mathbf{r}_{k}}{\theta_i} \delta \theta_i .
\end{equation}

Die gesamte virtuelle Arbeit des Systems dieser Teilchen kann also ebenso durch
\begin{equation}
\label{eq:virtual_work}
\delta W = Q_1 \delta \theta_1 + \ldots + Q_n\delta \theta_n = \sum_{k=1}^{l}\delta \mathbf{r}_k^T \mathbf{F}_k
\end{equation}
dargestellt werden, wobei sich die Komponenten der verallgemeinerten Kraft zu
\begin{equation}
\label{eq:virtual_work_force}
Q_i = \sum_{k=1}^l \left(\frac {\partial \mathbf{r}_k} {\partial \theta_i} \right)^T \mathbf{F}_{k} = \partiell{\delta W}{\delta \theta_i} ,\quad i=1,\ldots, n 
\end{equation}
ergeben.
\section{Generierung und Simulation von DAE-Systemen}
DAE-Systeme sind ODE-Systeme, welche um algebraische Gleichungen (AGL, auch als Nebenbedingungen bezeichnet) ergänzt werden. Diese Nebenbedingungen können zur Darstellung von ZB der LG erster Art genutzt werden. DAE-Systeme lassen sich typischerweise in einer semi-expliziten Form darstellen
	\begin{subequations}
	\label{eq:dae_std}
	\begin{align}
		\mathbf{\dot{x}} &= \mathbf{f}(\mathbf{x}, \mathbf{z}, \mathbf{u}, t) \\
		\mathbf{0} &= \mathbf{a}(\mathbf{x}, \mathbf{z}, t),
	\end{align}
	\end{subequations}
wobei $\mathbf{x}$ dem Systemzustand, $\mathbf{z}$ den algebraischen Variablen (weitere Systemgrößen, die in den Systemgleichungen ohne Ableitung vorkommen), $\mathbf{u}$ dem Systemeingang sowie $t$ der Zeit entspricht. \cite[S.137]{JanschekSystementwurf}

Eine Möglichkeit zur Klassifikation von DAE-Systemen ist der differenzielle Index $i_\mathrm{d}$. Dieser entspricht der minimalen Anzahl an Differenziationen $\frac{d}{dt}$ der AGL $\mathbf{a}$ (ZB), damit unter Einbeziehung der DGL ein explizites DGL-System aus dem DAE-System entsteht. Ein gewöhnliches DGL-System besitzt also den differenziellen Index $i_\mathrm{d} = 0$. Die Differenziation der AGL mit dem Resultat eines DAE-Systems mit kleinerem Index wird als Indexreduktion bezeichnet. \cite[S.139]{JanschekSystementwurf}

Für die Simulation von DAE-Systemen ist die numerische Integration dieser Gleichungssysteme notwendig. Die in dieser Arbeit untersuchten mechanischen Systeme sind solche mit starrer Kopplung als ZB vom Index $i_\mathrm{d} = 3$ und können für den Zustandsvektor $\mathbf{x} = (\boldsymbol{\theta}, \dot{\boldsymbol{\theta}})^T$ über folgende Bewegungsgleichungen mittels der Matrizen $\mathbf{M}$, $\mathbf{C}$, $\mathbf{K}$, $\mathbf{G}$ und $\mathbf{B}$ beschrieben werden \cite[S.240]{JanschekSystementwurf}:
\begin{subequations}
\label{eq:implicit_mechanical_system}
\begin{align}
	\mathbf{0} &= \mathbf{M}(\boldsymbol{\theta}) \ddot{\boldsymbol{\theta}} + \mathbf{C}(\boldsymbol{\theta}, \dot{\boldsymbol{\theta}}) + \mathbf{K}(\boldsymbol{\theta}, \dot{\boldsymbol{\theta}}) + \mathbf{G}(\boldsymbol{\theta}) \mathbf{z} - \mathbf{B}(\boldsymbol{\theta}) \mathbf{u}\\
	\mathbf{0} &= \mathbf{g}(\boldsymbol{\theta}).
\end{align}
\end{subequations}

Zur Integration des Systems der Gleichungen \eqref{eq:dae_std} beziehungsweise \eqref{eq:implicit_mechanical_system} gibt es verschiedene Möglichkeiten \cite[Kap. 8]{ModSimSkript}: 
\begin{itemize}
\item  Indexreduktion auf Index $i_\mathrm{d} = 2$ und anschließende Integration über ein implizites\footnote{Auf der linken und rechten Seite der zu integrierenden Gleichungen sind die gesuchten Näherungswerte von $\mathbf{x}(t_{i+1})$ an der Stelle $t_{i+1}$ enthalten.} Verfahren
\item Indexreduktion auf Index $i_\mathrm{d} = 1$ und anschließende Integration über ein explizites\footnote{Zur Berechnung des Näherungswertes von $\mathbf{x}(t_{i+1})$ an der Stelle $t_{i+1}$ wird einzig der zuletzt berechnete Näherungswert von $\mathbf{x}(t_{i})$ an der Stelle $t_{i}$ benötigt.} Verfahren mit AGL-Löser oder ein implizites Verfahren
\item Indexreduktion auf Index  $i_\mathrm{d} = 0$ und anschließende Integration über ein explizites oder implizites Verfahren.
\end{itemize}
Die im Python-Paket symbtools \cite{symbtools} enthaltene Bibliothek modeltools führt die Reduktion von Systemen mit Index $i_\mathrm{d} = 3$ auf $i_\mathrm{d} = 1$ durch. Zur numerischen Berechnung kann daraufhin der Solver ODASSL des Python-Pakets assimulo \cite{assimulo} verwendet werden.

Zur Erfüllung der AGL zu Simulationsbeginn müssen konsistente Anfangswerte $\mathbf{x}(0)$ und $\mathbf{z}(0)$ bestimmt werden. Bei DAE-Systemen mit Index $i_\mathrm{d} \geq 2$  kann $\mathbf{x}(0)$ nicht mehr frei gewählt werden, da $\mathbf{z}(0)$ nicht mehr ausschließlich aus AGL bestimmbar ist. Daher ist es notwendig, zusätzliche algebraische Bedingungen an $\mathbf{x}$ und $\mathbf{z}$ aus den DGL abzuleiten. Die Bibliothek modeltools berechnet konsistente Anfangswerte mit der Funktion \texttt{calc\_consistent\_init\_vals}. Falls sich andernfalls inkonsistente Anfangswerte ergeben, folgen daraus Simulationsfehler in den ersten Schritten oder sogar vollständig falsche Ergebnisse. \cite[S.207]{JanschekSystementwurf}

\section{Analytisches Modell des Einzelkrans}
\label{sec:single_crane}
Eine Implementierung der in diesem Abschnitt durchgeführten Überlegungen ist unter \cite[flatness\_notebooks/ODE\_flatness\_analysis\_single\_crane.ipynb]{SAGithub} zu finden.

Mittels der LG zweiter Art wird in diesem Abschnitt ein ODE-Modell des Einzelkrans erzeugt. Dabei wird entsprechend der Erläuterungen aus Abschnitt \ref{sec:Lagrange2_theory} vorgegangen. Diese Modellierung hat gegenüber den LG erster Art  den Vorteil, dass durch die generalisierte Kraft $\mathbf{Q}$ gerade die Stellkraft im Seil gut abgebildet werden kann sowie eine Vielzahl verschiedener Integrationsverfahren für eine effiziente Lösung des ODE-Systems nutzbar ist. Abbildung \ref{fig:single_crane_diagram} zeigt die Konfiguration des Einzelkransystems.

\begin{figure}[ht]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=1]{Pictures/ODE_flatness_analysis_single_crane_diagram}
	\end{center}
	\caption[Planare Geometrie des Einzelkransystems]
	{Planare Geometrie des Einzelkransystems mit Systemgrößen, Systemparametern und Kräften.}
	\label{fig:single_crane_diagram}
\end{figure}

Als direkt aktuierte Koordinate wird nur die $x$-Verschiebung $q_1$ der Laufkatzenposition $\mathbf{S}_1$ $(=\mathbf{B}_1 = \mathbf{G}_1)$ ausgewählt. Die nicht direkt aktuierten Koordinaten sind die $x$- und $y$-Auslenkungen $(p_1, p_2)$ der Last $\mathbf{S}_2$ aus dem Ursprung. Die variable Seillänge wird mit $l_1$ bezeichnet, die durch die Koordinaten auch mittels
\begin{equation}
	l_1 = \sqrt{(p_1 - q_1)^2 + p_2^2}
\end{equation}
ausgedrückt werden kann. Die Position der beiden Massenschwerpunkte kann somit wie folgt durch die Koordinaten beschrieben werden:
\begin{equation}
	\mathbf{S}_1 =
	\begin{pmatrix}
		q_1 \\
		0
	\end{pmatrix}, 
	\quad
	\mathbf{S}_2 =
	\begin{pmatrix}
		p_1 \\
		p_2
	\end{pmatrix}.
\end{equation}

Damit ist es möglich die kinetische und potentielle Energie des Systems zu formulieren:
\begin{align}
	T &= \frac{m_1}{2} \dot{\mathbf{S}}_1^T \dot{\mathbf{S}}_1 + \frac{m_2}{2} \dot{\mathbf{S}}_2^T \dot{\mathbf{S}}_2 = \frac{m_{1} \dot{q}_{1}^{2}}{2} + \frac{m_{2} \dot{p}_{1}^{2}}{2} + \frac{m_{2} \dot{p}_{2}^{2}}{2} \\
	V &= m_2 g \ \mathbf{S}_2^T \mathbf{e}_y = m_{2} g p_{2}.
\end{align}

Die Systemgleichungen können durch die LG zweiter Art \eqref{eq:lagrange2} zunächst in Abhängigkeit der Komponenten der generalisierten Kraft $Q_i$ bestimmt werden:
\begin{subequations}
	\label{eq:single_crane_sys_w_Q}
	\begin{align}
		- Q_{1} + m_{2} \ddot{p}_{1} &= 0\\
		- Q_{2} + g m_{2} + m_{2} \ddot{p}_{2} &= 0\\
		- Q_{3} + m_{1} \ddot{q}_{1} &= 0.
	\end{align}
\end{subequations}

Die Eingangskomponenten $\tau_1$, $\tau_2$ des Systems entsprechen den unterlagert geregelten Kräften der Motoren der Laufkatze bzw. der Seilwinde. Sie können über Stellkräfte vektoriell dargestellt werden:
\begin{equation}
	\mathbf{F}_1 =
	\left(\begin{matrix}
		\tau_{1} \\
		0
	\end{matrix}\right), \quad
	\mathbf{F}_2 =
	\left(\begin{matrix}
		\frac{\tau_{2} \left(p_{1} - q_{1}\right)}{l_{1}}\\
		\frac{p_{2} \tau_{2}}{l_{1}}
	\end{matrix}\right).
\end{equation}

Durch die Anwendung des Prinzips der virtuellen Arbeit nach Gleichung \eqref{eq:virtual_work} und \eqref{eq:virtual_work_force} ist es möglich, die generalisierte Kraft durch diese Stellkräfte bzw. den Systemeingang auszudrücken:
\begin{equation}
	\mathbf{Q}=
	\left(\begin{matrix}
		\frac{\tau_{2} \left(p_{1} - q_{1}\right)}{l_{1}}\\
		\frac{p_{2} \tau_{2}}{l_{1}}\\
		\tau_{1} - \frac{\tau_{2} \left(p_{1} - q_{1}\right)}{l_{1}}
	\end{matrix}\right).
\end{equation}

Durch Einsetzen dieser generalisierten Kraft in die Gleichungen \eqref{eq:single_crane_sys_w_Q} lässt sich ein abschließender Satz an Systemgleichungen des Einzelkrans bilden:
\begin{subequations}
	\label{single_flat_syseqs}
	\begin{align}
		m_{2} \ddot{p}_{1} - \frac{\tau_{2} \left(p_{1} - q_{1}\right)}{l_{1}} &= 0 \label{single_flat_syseq1}\\
		g m_{2} + m_{2} \ddot{p}_{2} - \frac{p_{2} \tau_{2}}{l_{1}} &= 0\label{single_flat_syseq2}\\
		m_{1} \ddot{q}_{1} - \tau_{1} + \frac{\tau_{2} \left(p_{1} - q_{1}\right)}{l_{1}} &= 0\label{single_flat_syseq3}.
	\end{align}
\end{subequations}


\section{Analytisches Modell des Doppelkrans}
Aufbauend auf der Modellierung eines Einzelkrans wird in diesem Abschnitt eine Erweiterung des Systems auf ein Doppelkransystem in Analogie zum realen Demonstrator vorgenommen. Aufgrund der an beiden Laufkatzen befestigten Last liegt zunächst alternativ zum vorherigen Vorgehen die Nutzung der LG erster Art nahe. Bei dieser wird mittels algebraischer ZB zur Modellierung der kinematischen Schleife \footnote{Diese Bezeichnung zielt auf den Vergleich des Systems mit einem Viergelenk aus der Literatur ab, durch die gemeinsame Last wird die Schleife „geschlossen“.} ein DAE-System erzeugt. Allerdings ist dabei die Beschreibung der Aktuierung der Seilwinden anspruchsvoller, da bereits für eine konstante Seillänge die bei der Katzfahrt auftretenden dynamischen Seilkräfte kompensiert werden müssen, ohne dass es dafür eine explizite resultierende Gesamtkraft gibt, die zu Null gesetzt werden kann. Beim realen Demonstrator sperrt ein Schneckengetriebe der Seilwinde im stromfreien Fall die Hubaktuierung. Auch bei einem Doppelkransystem ist wieder eine Modellierung mit den LG zweiter Art möglich.

\subsection{Ansatz über ein DAE-System}
Eine Implementierung der in diesem Abschnitt durchgeführten Überlegungen ist unter \cite[double\_crane\_notebooks/DAE\_double\_crane\_cartesian.ipynb]{SAGithub} zu finden.

Mittels der LG erster Art wird im Folgenden ein DAE-Modell des Doppelkrans erzeugt. Dabei wird entsprechend Abschnitt \ref{sec:Lagrange1_theory} vorgegangen. Schließlich ergibt sich hierbei ein komplexerer Satz an Systemgleichungen, die typischerweise weniger effizient zu simulieren sind als bei einem ODE-System. Daher wird dieser Ansatz in weiteren Kapiteln nicht weiter verfolgt. Eine Dokumentation dieser Modellierung wird trotzdem als sinnvoll erachtet. Durch die Einprägung von ZB kann die kinematische Schleife wegen der gemeinsamen Last intuitiv abgebildet werden. Es wird zunächst einzig eine horizontale Aktuierung der Laufkatzen durch den Eingang $\boldsymbol{\tau} = (\tau_{1}, \tau_{2})^T$ betrachtet. Für eine effiziente Simulation mit aktuierten Seilwinden, welche für diesen Ansatz nicht mehr im Rahmen dieser Studienarbeit durchgeführt wird, wäre eine Umformulierung des Problems mit den Seillängen als Stellgröße sinnvoll. \cite{RudolphSkriptFlach} Abbildung \ref{fig:DAE_double_crane_diagram} zeigt die Konfiguration dieses Doppelkransystems.

\begin{figure}[ht]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=1]{Pictures/DAE_double_crane_cartesian_diagram.pdf}
	\end{center}
	\caption[Planare Geometrie des Doppellkransystems im DAE-Modell]
	{Planare Geometrie des Doppellkransystems im DAE-Modell mit Systemgrößen, Systemparametern und Kräften.}
	\label{fig:DAE_double_crane_diagram}
\end{figure}

Als direkt aktuierte Koordinate werden nur die $x$-Verschiebungen $q_1$ der Position der linken Laufkatze $\mathbf{S}_1$ $(= \mathbf{G}_1 = \mathbf{B}_1)$ und $q_2$ der Position der rechten Laufkatze $\mathbf{S}_5$ $(= \mathbf{G}_4 = \mathbf{B}_2)$ ausgewählt, als nicht direkt aktuierte Koordinaten die absolute Position $(p_1, p_2)$ des Gelenks $\mathbf{G}_2$ $(= \mathbf{S}_2)$ sowie $(p_3, p_4)$ des Gelenks $\mathbf{G}_3$ $(=\mathbf{S}_4)$. 

Für konstante Seillängen können folgende ZB formuliert werden:
\begin{align}
	a_1(\mathbf{p}, \mathbf{q}) &= l_{1} - \sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}} = 0\\
	a_2(\mathbf{p}, \mathbf{q}) &= l_{2} - \sqrt{p_{4}^{2} + \left(- l_{0} + p_{3} - q_{2}\right)^{2}} = 0.	
\end{align}

Die konstante Lastlänge wird durch
\begin{equation}
	2 s_{3} = \sqrt{\left(p_{1} - p_{3}\right)^{2} + \left(p_{2} - p_{4}\right)^{2}} \Leftrightarrow a_3(\mathbf{p}) = \sqrt{\left(p_{1} - p_{3}\right)^{2} + \left(p_{2} - p_{4}\right)^{2}} - 2 s_{3} = 0
\end{equation}
ausgedrückt. Die Position der Massenschwerpunkte und Gelenke kann somit wie folgt durch die Koordinaten beschrieben werden:
\begin{align}
	\mathbf{S}_1 =
	\begin{pmatrix}
		q_1 \\
		0
	\end{pmatrix}, 
	\
	\mathbf{S}_2 =
	\begin{pmatrix}
		p_1 \\
		p_2
	\end{pmatrix},
	\
	\mathbf{S}_3 =
	\frac{1}{2}(\mathbf{S}_2 + \mathbf{S}_4) =
	\frac{1}{2}
	\begin{pmatrix}
		p_1 + p_3 \\
		p_2 + p_4
	\end{pmatrix},
	\nonumber \\
	\mathbf{S}_4 =
	\left(\begin{matrix}
		p_3 \\
		p_4
	\end{matrix}\right),
	\
	\mathbf{S}_5 =
	\left(\begin{matrix}
		l_0 + q_2 \\
		0
	\end{matrix}\right).
\end{align}

Es ist notwendig, dass alle abgeleiteten Koordinaten in der kinetischen Energie $T$ vorhanden sind, damit die Massenmatrix $\mathbf{M}(\boldsymbol{\theta})$ in Gleichung \eqref{eq:implicit_mechanical_system} regulär ist \cite[${\text{S. 7}}$]{DissKnoll}. Dies wäre bei einer Modellierung der Last mit homogener Masseverteilung und homogenem Trägheitsmoment nicht der Fall. Deshalb wird die Last durch ein System aus drei Massen ($m_2$, $m_3$, $m_4$) beschrieben, das sich unter Einhaltung der folgenden Zusammenhänge simulativ äquivalent verhält:
\begin{subequations}
\begin{align}
	m_{\mathrm{ges}} &= m_2 + m_3 + m_4\\
	m_2 &= m_4\\
	J &= m_2 s_3^2 + m_4 s_3^2 = 2 m_2 s_3^2\\
	\Rightarrow m_2 &= m_4 = \frac{J}{2 s_3^2} \\
	\Rightarrow m_3 &= m_{\mathrm{ges}} - m_2 -m_4.
\end{align}
\end{subequations}

Die Größen $m_{\mathrm{ges}}$ und $J$ beziehen sich auf die in Abschnitt \ref{sec:SysIdent} identifizierten Systemparameter, die so auch bei der Modellbildung des Doppelkrans als ODE-System genutzt wurden.

Somit ist es möglich, die kinetische und potentielle Energie des Systems zu formulieren:
\begin{align}
	T &= \frac{m_1}{2} \dot{\mathbf{S}}_1^T \dot{\mathbf{S}}_1 + \frac{m_2}{2} \dot{\mathbf{S}}_2^T \dot{\mathbf{S}}_2 + \frac{m_3}{2} \dot{\mathbf{S}}_3^T \dot{\mathbf{S}}_3 + \frac{m_4}{2} \dot{\mathbf{S}}_4^T \dot{\mathbf{S}}_4 + \frac{m_5}{2} \dot{\mathbf{S}}_5^T \dot{\mathbf{S}}_5 \nonumber \\  
	&= \frac{m_{1} \dot{q}_{1}^{2}}{2} + \frac{m_{2} \dot{p}_{1}^{2}}{2} + \frac{m_{2} \dot{p}_{2}^{2}}{2} + \frac{m_{3} \cdot 0.25 \left(\dot{p}_{1} + \dot{p}_{3}\right)^{2}}{2} + \frac{m_{3} \cdot 0.25 \left(\dot{p}_{2} + \dot{p}_{4}\right)^{2}}{2} \nonumber \\
	&+ \frac{m_{4} \dot{p}_{3}^{2}}{2} + \frac{m_{4} \dot{p}_{4}^{2}}{2} + \frac{m_{5} \dot{q}_{2}^{2}}{2} \\
	V &= (m_2 \ g \ \mathbf{S}_2^T + m_3 \ g \ \mathbf{S}_3^T + m_4 \ g \ \mathbf{S}_4^T) \mathbf{e}_y \nonumber \\ &= g \left(m_{2} p_{2} + m_{3} \left(0.5 p_{2} + 0.5 p_{4}\right) + m_{4} p_{4}\right).
\end{align}

Unter Nutzung der Lagrange-Multiplikatoren $\lambda_j$ ist es mittels der LG zweiter Art \eqref{eq:lagrange1} möglich, die Systemgleichungen auszudrücken:
\begin{subequations}
	\begin{flalign}
		&- \frac{\lambda_{1} p_{1}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}} + \frac{\lambda_{1} q_{1}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}} - \frac{\lambda_{2} p_{1}}{\sqrt{\left(p_{1} - p_{3}\right)^{2} + \left(p_{2} - p_{4}\right)^{2}}} \nonumber \\
		&+ \frac{\lambda_{2} p_{3}}{\sqrt{\left(p_{1} - p_{3}\right)^{2} + \left(p_{2} - p_{4}\right)^{2}}} + m_{2} \ddot{p}_{1} + 0.25 m_{3} \ddot{p}_{1} + 0.25 m_{3} \ddot{p}_{3} = 0\\
		&g m_{2} + 0.5 g m_{3} - \frac{\lambda_{1} p_{2}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}} - \frac{\lambda_{2} p_{2} + \lambda_{2} p_{4}}{\sqrt{\left(p_{1} - p_{3}\right)^{2} + \left(p_{2} - p_{4}\right)^{2}}} \nonumber \\
		&+ m_{2} \ddot{p}_{2} + 0.25 m_{3} \ddot{p}_{2} + 0.25 m_{3} \ddot{p}_{4} = 0\\
		&\frac{\lambda_{2} \left(p_{1} - p_{3}\right)}{\sqrt{\left(p_{1} - p_{3}\right)^{2} + \left(p_{2} - p_{4}\right)^{2}}} + \frac{\lambda_{3} \left(l_{0} - p_{3} + q_{2}\right)}{\sqrt{p_{4}^{2} + \left(l_{0} - p_{3} + q_{2}\right)^{2}}} \noindent \\
		&+ \frac{m_{3} \left(0.5 \ddot{p}_{1} + 0.5 \ddot{p}_{3}\right)}{2} + m_{4} \ddot{p}_{3} = 0\\
		&0.5 g m_{3} + g m_{4} + \frac{\lambda_{2} p_{2}}{\sqrt{\left(p_{1} - p_{3}\right)^{2} + \left(p_{2} - p_{4}\right)^{2}}} - \frac{\lambda_{2} p_{4}}{\sqrt{\left(p_{1} - p_{3}\right)^{2} + \left(p_{2} - p_{4}\right)^{2}}} \nonumber \\ 
		&- \frac{\lambda_{3} p_{4}}{\sqrt{p_{4}^{2} + \left(l_{0} - p_{3} + q_{2}\right)^{2}}} + 0.25 m_{3} \ddot{p}_{2} + 0.25 m_{3} \ddot{p}_{4} + m_{4} \ddot{p}_{4} = 0\\
		&\frac{\lambda_{1} \left(p_{1} - q_{1}\right) + \sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}} \left(m_{1} \ddot{q}_{1} - \tau_{1}\right)}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}} = 0\\
		&\frac{- \lambda_{3} \left(l_{0} - p_{3} + q_{2}\right) + \sqrt{p_{4}^{2} + \left(l_{0} - p_{3} + q_{2}\right)^{2}} \left(m_{5} \ddot{q}_{2} - \tau_{2}\right)}{\sqrt{p_{4}^{2} + \left(l_{0} - p_{3} + q_{2}\right)^{2}}} = 0.
	\end{flalign}
\end{subequations}

\subsection{Ansatz über ein ODE-System}
\label{subsec:double_crane_lagrange2}
Eine Implementierung der in diesem Abschnitt durchgeführten Überlegungen ist unter \cite[flatness\_notebooks/ODE\_flatness\_analysis.ipynb]{SAGithub} zu finden.

Mittels der LG zweiter Art wird im Folgenden ein ODE-Modell des Doppelkrans erzeugt. Dabei wird entsprechend Abschnitt \ref{sec:Lagrange2_theory} vorgegangen. Abbildung~\ref{fig:double_crane_diagram} zeigt die Konfiguration dieses Doppelkransystems.

\begin{figure}[ht]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=1]{Pictures/ODE_flatness_analysis_double_crane_diagram}
	\end{center}
	\caption[Planare Geometrie des Doppellkransystems im ODE-Modell]
	{Planare Geometrie des Doppellkransystems im ODE-Modell mit Systemgrößen, Systemparametern und Kräften.}
	\label{fig:double_crane_diagram}
\end{figure}


Als direkt aktuierte Koordinate werden zunächst nur die $x$-Verschiebungen $q_1$ der Position der linken Laufkatze $\mathbf{S}_1$ $(= \mathbf{G}_1 = \mathbf{B}_1)$ und $q_2$ der Position der rechten Laufkatze $\mathbf{S}_3$ $( = \mathbf{B}_2 = \mathbf{G}_6)$ ausgewählt. Die absolute Position $(p_1, p_2)$ des Lastschwerpunkts $\mathbf{S}_2$ sowie die Orientierung der Last $p_3$ gegenüber der Horizontalen entsprechen den nicht direkt aktuierte Koordinaten. Die variablen Seillängen werden mit $l_1$ sowie $l_2$ bezeichnet, die durch die Koordinaten auch mittels
\begin{align}
l_1 &= \sqrt{\left(p_{2} - s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(p_{1} - q_{1} - s_{2} \cos{\left(p_{3} \right)}\right)^{2}}, \\
l_2 &= \sqrt{\left(p_{2} + s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(- l_{0} + p_{1} - q_{2} + s_{2} \cos{\left(p_{3} \right)}\right)^{2}}
\end{align}
ausgedrückt werden können. Die Position der Massenschwerpunkte und Gelenke kann somit wie folgt beschrieben werden:
\begin{equation}
\begin{smallmatrix}
\mathbf{S}_1 =
\begin{pmatrix}
q_1 \\
0
\end{pmatrix}, 
\
\mathbf{S}_2 =
\begin{pmatrix}
p_1 \\
p_2
\end{pmatrix},
\
\mathbf{S}_3 =
\begin{pmatrix}
l_0 + q_2 \\
0
\end{pmatrix},
\
\mathbf{G}_3 =
\left(\begin{matrix}
p_{1} - s_{2} \cos{\left(p_{3} \right)}\\
p_{2} - s_{2} \sin{\left(p_{3} \right)}
\end{matrix}\right),
\
\mathbf{G}_4 =
\left(\begin{matrix}
p_{1} + s_{2} \cos{\left(p_{3} \right)}\\
p_{2} + s_{2} \sin{\left(p_{3} \right)}
\end{matrix}\right)
\end{smallmatrix}.
\end{equation}

Damit ist es möglich, die kinetische und potentielle Energie des Systems zu formulieren:
\begin{align}
T &= \frac{m_1}{2} \dot{\mathbf{S}}_1^T \dot{\mathbf{S}}_1 + \frac{m_2}{2} \dot{\mathbf{S}}_2^T \dot{\mathbf{S}}_2 + \frac{J_2}{2} \dot{p}_3^2 + \frac{m_3}{2} \dot{\mathbf{S}}_3^T \dot{\mathbf{S}}_3 \nonumber \\  
&= \frac{J_{2} \dot{p}_{3}^{2}}{2} + \frac{m_{1} \dot{q}_{1}^{2}}{2} + \frac{m_{2} \dot{p}_{1}^{2}}{2} + \frac{m_{2} \dot{p}_{2}^{2}}{2} + \frac{m_{3} \dot{q}_{2}^{2}}{2} \\
V &= m_2 g \ \mathbf{S}_2^T \mathbf{e}_y = m_{2} g p_{2}.
\end{align}

Die Systemgleichungen können durch die LG zweiter Art \eqref{eq:lagrange2} zunächst in Abhängigkeit der Komponenten der generalisierten Kraft $Q_i$ bestimmt werden:
\begin{subequations}
	\label{eq:double_crane_ODE_w_Q}
	\begin{align}
	- Q_{1} + m_{2} \ddot{p}_{1} &= 0\\
	- Q_{2} + g m_{2} + m_{2} \ddot{p}_{2} &= 0\\
	J_{2} \ddot{p}_{3} - Q_{3} &= 0\\
	- Q_{4} + m_{1} \ddot{q}_{1} &= 0\\
	- Q_{5} + m_{3} \ddot{q}_{2} &= 0.
	\end{align}
\end{subequations}

Über die Komponenten des Systemeingangs $\boldsymbol{\tau}$ und normierte Richtungsvektoren der Führungsschiene bzw. der Seile können die vektoriellen Stellkräfte dargestellt werden:
\begin{equation}
\begin{smallmatrix}
\mathbf{F}_1 =
\left(\begin{matrix}
\tau_{1} \\
0
\end{matrix}\right), \
\mathbf{F}_2 =
\left(\begin{matrix}
\tau_{2} \\
0
\end{matrix}\right), \
\mathbf{F}_3 =
\left(\begin{matrix}
\frac{\tau_{3} \left(p_{1} - q_{1} - s_{2} \cos{\left(p_{3} \right)}\right)}{l_{1}}\\
\frac{\tau_{3} \left(p_{2} - s_{2} \sin{\left(p_{3} \right)}\right)}{l_{1}}
\end{matrix}\right), \
\mathbf{F}_4 =
\left(\begin{matrix}
\frac{\tau_{4} \left(- l_{0} + p_{1} - q_{2} + s_{2} \cos{\left(p_{3} \right)}\right)}{l_{2}}\\
\frac{\tau_{4} \left(p_{2} + s_{2} \sin{\left(p_{3} \right)}\right)}{l_{2}}
\end{matrix}\right)
\end{smallmatrix}.
\end{equation}

Durch die Anwendung des Prinzips der virtuellen Arbeit ist es möglich, die generalisierte Kraft durch die Stellkräfte bzw. den Systemeingang auszudrücken (Abkürzungen $\nu_x := \sin{x}$ und $\mu_x := \cos{x}$):
\begin{equation}
\mathbf{Q}=
\left(\begin{smallmatrix}
\frac{\tau_{4} \left(- l_{0} + p_{1} - q_{2} + s_{2} \mu_{p_{3}}\right)}{l_{2}} + \frac{\tau_{3} \left(p_{1} - q_{1} - s_{2} \mu_{p_{3}}\right)}{l_{1}}\\
\frac{\tau_{4} \left(p_{2} + s_{2} \nu_{p_{3}}\right)}{l_{2}} + \frac{\tau_{3} \left(p_{2} - s_{2} \nu_{p_{3}}\right)}{l_{1}}\\
\frac{s_{2} \tau_{4} \left(p_{2} + s_{2} \nu_{p_{3}}\right) \mu_{p_{3} }}{l_{2}} - \frac{s_{2} \tau_{4} \left(- l_{0} + p_{1} - q_{2} + s_{2} \mu_{p_{3} }\right) \nu_{p_{3}}}{l_{2}} - \frac{s_{2} \tau_{3} \left(p_{2} - s_{2} \nu_{p_{3}}\right) \mu_{p_{3}}}{l_{1}} + \frac{s_{2} \tau_{3} \left(p_{1} - q_{1} - s_{2} \mu_{p_{3}}\right) \nu_{p_{3}}}{l_{1}}\\
\tau_{1} - \frac{\tau_{3} \left(p_{1} - q_{1} - s_{2} \mu_{p_{3} }\right)}{l_{1}}\\
\tau_{2} - \frac{\tau_{4} \left(- l_{0} + p_{1} - q_{2} + s_{2} \mu_{p_{3} }\right)}{l_{2}}
\end{smallmatrix}\right).
\end{equation}

Durch Einsetzen dieser generalisierten Kraft in die Gleichungen \eqref{eq:double_crane_ODE_w_Q} lässt sich ein abschließender Satz an Systemgleichungen des Doppelkrans bilden:
\begin{subequations}
	\label{double_flat_syseqs}
	\begin{flalign}
	&m_{2} \ddot{p}_{1} - \frac{\tau_{4} \left(- l_{0} + p_{1} - q_{2} + s_{2} \cos{\left(p_{3} \right)}\right)}{l_{2}} - \frac{\tau_{3} \left(p_{1} - q_{1} - s_{2} \cos{\left(p_{3} \right)}\right)}{l_{1}} = 0 \label{double_flat_syseq1}\\
	&g m_{2} + m_{2} \ddot{p}_{2} - \frac{\tau_{4} \left(p_{2} + s_{2} \sin{\left(p_{3} \right)}\right)}{l_{2}} - \frac{\tau_{3} \left(p_{2} s_{2} \sin{\left(p_{3} \right)}\right)}{l_{1}} = 0 \label{double_flat_syseq2}\\
	&J_{2} \ddot{p}_{3} - \frac{s_{2} \tau_{4} \left(p_{2} + s_{2} \sin{\left(p_{3} \right)}\right) \cos{\left(p_{3} \right)}}{l_{2}} + \frac{s_{2} \tau_{4} \left(- l_{0} + p_{1} - q_{2} + s_{2} \cos{\left(p_{3} \right)}\right) \sin{\left(p_{3} \right)}}{l_{2}} \nonumber\\
	&+ \frac{s_{2} \tau_{3} \left(p_{2} - s_{2} \sin{\left(p_{3} \right)}\right) \cos{\left(p_{3} \right)}}{l_{1}} - \frac{s_{2} \tau_{3} \left(p_{1} - q_{1} - s_{2} \cos{\left(p_{3} \right)}\right) \sin{\left(p_{3} \right)}}{l_{1}} = 0 \label{double_flat_syseq3}\\
	&m_{1} \ddot{q}_{1} - \tau_{1} + \frac{\tau_{3} \left(p_{1} - q_{1} - s_{2} \cos{\left(p_{3} \right)}\right)}{l_{1}} = 0 \label{double_flat_syseq4}\\
	&m_{3} \ddot{q}_{2} - \tau_{2} + \frac{\tau_{4} \left(- l_{0} + p_{1} - q_{2} + s_{2} \cos{\left(p_{3} \right)}\right)}{l_{2}} = 0\label{double_flat_syseq5}.
	\end{flalign}
\end{subequations}

Alternativ kann das Doppelkransystem für spätere regelungstechnische Untersuchungen auch eingangsaffin im Zustandsraum beschrieben werden:
\begin{align}
\label{eq:state_space_double_crane}
\begin{split}
\dot{\mathbf{x}} &= \mathbf{f}(\mathbf{x}) + \mathbf{g}(\mathbf{x}) \boldsymbol{\tau} \text{ mit } \\ 
\mathbf{x} &= (p_{1},	p_{2}, p_{3}, q_{1}, q_{2}, \dot{p}_{1}, \dot{p}_{2}, \dot{p}_{3}, \dot{q}_{1}, \dot{q}_{2})^T, \\
\mathbf{f}(\mathbf{x}) &= 
(\dot{p}_{1}, \dot{p}_{2}, \dot{p}_{3}, \dot{q}_{1}, \dot{q}_{2}, 0, -g, 0, 0, 0)^T, \\ 
\mathbf{g}(\mathbf{x}) &=
\left(\begin{smallmatrix}
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & 0 & 0\\
0 & 0 & \frac{p_{1} - q_{1} - s_{2} \cos{\left(p_{3} \right)}}{l_{1} m_{2}} & \frac{- l_{0} + p_{1} - q_{2} + s_{2} \cos{\left(p_{3} \right)}}{l_{2} m_{2}}\\
0 & 0 & \frac{p_{2} - s_{2} \sin{\left(p_{3} \right)}}{l_{1} m_{2}} & \frac{p_{2} + s_{2} \sin{\left(p_{3} \right)}}{l_{2} m_{2}}\\
0 & 0 & \frac{s_{2} \left(p_{1} \sin{\left(p_{3} \right)} - p_{2} \cos{\left(p_{3} \right)} - q_{1} \sin{\left(p_{3} \right)}\right)}{J_{2} l_{1}} & \frac{s_{2} \left(l_{0} \sin{\left(p_{3} \right)} - p_{1} \sin{\left(p_{3} \right)} + p_{2} \cos{\left(p_{3} \right)} + q_{2} \sin{\left(p_{3} \right)}\right)}{J_{2} l_{2}}\\
\frac{1}{m_{1}} & 0 & \frac{- p_{1} + q_{1} + s_{2} \cos{\left(p_{3} \right)}}{l_{1} m_{1}} & 0\\
0 & \frac{1}{m_{3}} & 0 & \frac{l_{0} - p_{1} + q_{2} - s_{2} \cos{\left(p_{3} \right)}}{l_{2} m_{3}}
\end{smallmatrix}\right).
\end{split}
\end{align}

\section{Identifikation der Systemparameter}
\label{sec:SysIdent}

Die meisten Systemparameter der Modelle sind Massen oder geometrische Größen und lassen sich durch Messungen mit einem Lineal oder einer Wage empirisch bestimmen. Lediglich für das Trägheitsmoment $J$ der Last ist eine direkte experimentelle Bestimmung, etwa durch einen Pendelversuch, zu aufwendig. Daher wird dieser Parameter unter der Annahme eines Quaders mit homogener Masseverteilung und Rotationsachse durch seinen Mittelpunkt in der vertikalen Aufhängungsebene nach \cite{LastTraegheit} berechnet:
\begin{equation}
	J = \frac{1}{12} m_2 ((2 s_2)^2 + h^2).
\end{equation}

Dabei entspricht $h$ der Höhe der Last, $2 s_2$ der Lastlänge und $m_2$ der Masse der Last. Die numerische Belegung der Systemparameter ist in Tabelle \ref{tab:sys_params} zusammengefasst.

\begin{table}[htbp]%
	\centering
	\caption{Physikalische Parameter des Doppelkrandemonstratorsystems.}
	\label{tab:sys_params}
	\begin{tabular}{l c r} 
		\toprule
		Parameter & Bezeichnung im ODE-Modell & Wert \\ 
		\hline
		Masse Laufkatze 1 & $m_1$ & 0,45 \si{\kg} \\
		Masse Laufkatze 2 & $m_3$ & 0,45 \si{\kg} \\
 		Masse Last & $m_2$ & 0,557 \si{\kg} \\
		Länge Last & $2 s_2$ & 0,15 \si{\m} \\
		Höhe Last & $h$ & 0,09 \si{\m} \\
		Initialer Laufkatzenabstand & $l_0$ & 0,3 \si{\m} \\
		Trägheitsmoment Last & $J_2$ & 0,00455 $\si{\kg\m^2}$ \\
		\bottomrule
	\end{tabular}
\end{table}

\chapter{Flachheitsanalyse}
Zur Erweiterung des Begriffs der Steuerbarkeit auf nichtlineare Systeme wird die sogenannte (differenzielle) Flachheit als Systemeigenschaft definiert. Gerade für flache Mehrgrößensysteme gestaltet sich die Bestimmung geeigneter Eingangsgrößenverläufe zur Steuerung und auch Folgeregelung aus der Vorgabe nur weniger Referenztrajektorien als sehr praktikabel.

\section{Definition differenzieller Flachheit}\label{sec:Def_flatness}

Ein System der Form $\dot{\mathbf{x}} = \mathbf{F}(\mathbf{x}, \mathbf{u})$ mit $\mathbf{F}, \mathbf{x} \in \mathbb{R}^n$ und $\mathbf{u} \in \mathbb{R}^m$ heißt (differenziell) flach, falls ein $m$-Tupel $y := (y_1, ..., y_m)^T$ sowie glatte Funktionen $\mathbf{\Psi}$, $\boldsymbol{\theta}$ existieren, so dass
\begin{subequations}
\label{eq:general_flat_sys}
\begin{align}
\mathbf{x} &= \mathbf{\Psi}(\mathbf{y}, \dot{\mathbf{y}}, ..., \mathbf{y}^{(n_x)}) \text{ mit } n_x < \infty \text{ und } \\
\mathbf{u} &= \boldsymbol{\theta}(\mathbf{y}, \dot{\mathbf{y}}, ..., \mathbf{y}^{(n_u)}) \text{ mit } n_u < \infty \text{ gilt.}
\end{align}
\end{subequations}

Dabei ist $\mathbf{y}$ ein flacher Ausgang. Aus der Existenz eines flachen Ausgangs folgt, dass die Systemgrößen bestehend aus dem Zustand $\mathbf{x}$ und Eingang $\mathbf{u}$ eindeutig aus dem flachen Ausgang $\mathbf{y}$ und einer endlichen Anzahl dessen Zeitableitungen berechnet werden können, also keine Differenzialgleichungen durch Integration dafür gelöst werden müssen. Eine alternative Formulierung des Flachheitsbegriffs verzichtet auf die Angabe der gleichen Dimension $m$ von Eingang und flachem Ausgang, fordert aber die differenzielle Unabhängigkeit der Komponenten von $\mathbf{y}$. Die Existenzbedingungen eines ﬂachen Ausgangs sind bei Eingrößensystemen bekannt, allerdings ist der systematische Flachheitsnachweis und die Berechnung eines
ﬂachen Ausgangs bei Mehrgrößensystemen im Allgemeinen nicht abschließend gelöst. \cite[S. 185]{NLRT_Roebenack}

\section{Flachheitsanalyse von Mehrgrößensystemen}

Im Folgenden wird ein prinzipielles praktisches Vorgehen zur Bestimmung flacher Ausgänge von Mehrgrößensystemen sowie zur Parametrisierung der Systemgrößen anhand solcher flachen Ausgänge skizziert. Für eine mathematisch fundierte und systematische Herangehensweise sei auf den Beitrag \cite{Fritzsche2016} und die dort zitierten Quellen verwiesen. Im Unterschied zu diesem Beitrag wird hier aber nicht auf den  Gleichungen des sogenannten Tangentialsystems operiert, sondern auf den originalen nichtlinearen Gleichungen\footnote{Direkt auf den nichtlinearen Systemgleichungen zu operieren erschwert ggf. die Eliminierung von Größen bzw. ist diese nicht immer möglich. Es muss im Gegensatz zu \cite{Fritzsche2016} jedoch keine Integrabilitätsbedingung geprüft werden.}. 

Es sei ein nichtlineares Mehrgrößensystem wie in der Definition \ref{sec:Def_flatness} gegeben. Dieses sei affin bezüglich des Eingangs $\mathbf{u}$. Der Eingang könne mittels der Systemgleichungen eliminiert werden, so dass ein autonomes System aus $p := n - m$ Gleichungen folgt. Diese Gleichungen werden wiederum zur Elimination von $p$ der übriger Zustandskomponenten genutzt, wobei jeweils eine Gleichung und eine Systemgröße gemeinsam eliminiert werden. Wenn sich dieses sukzessive Vorgehen bis einschließlich der letzten Gleichung durchführen lässt, verbleiben schlussendlich $n - p = m$ Systemgrößen, die keiner Gleichung mehr genügen müssen. Diese bilden dann den flachen Ausgang $\mathbf{y}$.

Zur sukzessiven Elimination von Gleichungen und Systemgrößen bietet sich folgendes Vorgehen an: Um Systemgleichungen und Eingangskomponenten, welche mit geringem Aufwand eliminiert werden können zu identifizieren, wird die Jacobi-Matrix $\mathbf{J}_i$ der zu diesem Zeitpunkt noch $i$ verbliebenen Systemgleichungen bezüglich der noch verbliebenen Eingangkomponenten $\mathbf{u}_{m-(n-i)}$ gebildet. Dabei sind die zu den Matrixzeilen korrespondierenden Gleichungen geeignet, in denen nur ein isolierter Spalteneintrag $\varepsilon \neq 0$ steht, also weitere Einträge der Spalte Null sind:
\begin{equation}
	\mathbf{J}_i = 
	\begin{pmatrix}
	* & \cdots & * & 0 & * & \cdots & *\\
	\vdots & \ddots & \vdots & \vdots & \vdots & \ddots & \vdots \\
	* & \cdots & * & 0 & * & \cdots & *  \\
	* & \cdots & * & \varepsilon & * & \cdots & * \\
	* & \cdots & * & 0 & * & \cdots & *  \\
	\vdots & \ddots & \vdots & \vdots & \vdots & \ddots & \vdots \\
	* & \cdots & * & 0 & * & \cdots & *\\
	\end{pmatrix}.
\end{equation}

Falls keine solche Spalte zu finden ist, kann sie durch eine Transformation der Systemgleichungen durch die Multiplikation mit der Matrix $\mathbf{T}_i$ erzeugt werden:
\begin{equation}
	\mathbf{T}_i \mathbf{J}_i = 
	\begin{pmatrix}
		\mathbf{I}_{m-(n-i)} \\
		\mathbf{0}_{(n-m) \times (m-(n-i))}
	\end{pmatrix}.
\end{equation}

Dabei kann $\mathbf{T}_i$ über das linke Orthokomplement (der Vektorraum aller Zeilen, die orthogonal zu allen Spalten von $\mathbf{J}_i$ sind) $\mathbf{J}_i^{\mathrm{L} \perp}$ und die linke Pseudoinverse $\mathbf{J}_i^{\mathrm{L} +}$ der Jacobi-Matrix folgendermaßen gebildet werden \cite[Abschnitt 2.1.2]{Fritzsche2016}:
\begin{align}
	\label{eq:flatness_trafo}
	\begin{split}
	\mathbf{J}_i^{\mathrm{L} +} \mathbf{J}_i = \mathbf{I}_{m-(n-i)} \\
	\mathbf{J}_i^{\mathrm{L} \perp} \mathbf{J}_i = \mathbf{0}_{(n-m) \times (m-(n-i))} \\
	\Rightarrow \mathbf{T}_i = 
	\begin{pmatrix}
		\mathbf{J}_i^{\mathrm{L} +} \\
		\mathbf{J}_i^{\mathrm{L} \perp}
	\end{pmatrix} .
	\end{split}
\end{align}

Nachdem die Eingangskomponenten aus den Systemgleichungen eliminiert wurden, kann die Behandlung der anderen noch vorhandenen Systemgrößen analog durch Bildung der Jacobi-Matrix bezüglich dieser erfolgen. Der  flache Ausgang $\mathbf{y}$ besteht aus der Menge an Systemgrößen, welche im Idealfall nach Elimination aller Gleichungen übrig ist. Der konstruktive Flachheitsnachweis für ein System ist erbracht, wenn mittels der Zusammenhänge aus den Systemgleichungen entsprechend der Gleichungen \eqref{eq:general_flat_sys} alle Systemgrößen (insbesondere auch der Systemeingang) allein durch $(\mathbf{y}, \dot{\mathbf{y}}, \ddot{\mathbf{y}}, ...)$ parametrisiert sind. Dafür werden die Systemgleichung in umgekehrter Reihenfolge ihrer Eliminierung zur Berechnung der Parametrisierung verwendet. Jede eliminierte Gleichung wird als Definitionsgleichung einer Hilfsgröße auf Basis des flachen Ausgangs (und ggf. seiner Zeitableitungen) aufgefasst, die in den weiteren Gleichungen dann ggf. auch abgeleitet vorkommt.

Bei nichtlinearen Systemen ist es allerdings oft nicht direkt möglich, alle Gleichungen direkt zu eliminieren, so dass Freiheitsgrade bestehen, was eine Schwierigkeit der Flachheitsanalyse im Mehrgrößenfall darstellt. Der skizzierte Algorithmus ist deshalb nur als hinreichend zur Bestimmung eines flachen Ausgangs, aber nicht als notwendig zu betrachten.

\section{Flachheitsanalyse am Einzelkran}
\label{sec:flatness_single_crane}
Eine Implementierung der in diesem Abschnitt durchgeführten Überlegungen ist unter \cite[flatness\_notebooks/ODE\_flatness\_analysis\_single\_crane.ipynb]{SAGithub} zu finden.

Die im vorherigen Abschnitt allgemein geschilderte Vorgehensweise wird nun auf das Einzelkransystem aus Abschnitt \ref{sec:single_crane} angewendet. Aus der analytischen Modellbildung mit den LG zweiter Art folgen die drei Systemgleichungen \eqref{single_flat_syseqs}, welche als Grundlage des Flachheitsnachweises dienen. 

Zunächst wird die Jacobi-Matrix dieser Gleichungen bezüglich $\boldsymbol{\tau} = \mathbf{u}_2 = (\tau_1, \tau_2)^T$ gebildet:
\begin{equation}
	\mathbf{J}_3 =
	\left(\begin{matrix}
		0 & - \frac{p_{1} - q_{1}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}}\\
		0 & - \frac{p_{2}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}}\\
		-1 & \frac{p_{1} - q_{1}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}}
	\end{matrix}\right).
\end{equation}
Dabei ist zu erkennen, dass in der ersten Spalte der Jacobi-Matrix ein isolierter Nicht-Null-Eintrag vorkommt, also die Eingangskomponente $\tau_{1}$ durch die korrespondierende dritte Systemgleichung~\eqref{single_flat_syseq3} bestimmt werden kann. Eine Transformation des Systems ist dafür nicht notwendig. Dementsprechend können die letzte Zeile von $\mathbf{J}_3$ und die Ausgangskomponente $\tau_1$ eliminiert werden.

Im nächsten Schritt wird die Jacobi-Matrix $\mathbf{J}_2$ der verbliebenen Gleichungen \eqref{single_flat_syseq1} und \eqref{single_flat_syseq2} bezüglich $\mathbf{u}_1 = \tau_2$ berechnet: 
\begin{equation}
\mathbf{J}_2 =
\left(\begin{matrix}
- \frac{p_{1} - q_{1}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}}\\
- \frac{p_{2}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}}
\end{matrix}\right).
\end{equation}
Diese weist keine Spalte mit nur einer Komponente ungleich Null auf, also ist eine Transformation $\mathbf{T}_2$ des Systems entsprechend der Gleichungen \eqref{eq:flatness_trafo} durchzuführen. Wegen der nicht-quadratischen Dimension von $\mathbf{J}_2$ gilt es, eine linke Pseudoinverse $\mathbf{J}_2^{\mathrm{L}+} \in \mathbb{R}^{1 \times 2}$ zu finden:
\begin{equation}
\mathbf{J}_2^{\mathrm{L}+} \mathbf{J}_2 = \mathbf{I}_{1} = 1,
\end{equation}
sowie das linke Orthokomplement $\mathbf{J}_2^{\mathrm{L}\perp} \in \mathbb{R}^{1 \times 2}$:
\begin{equation}
\mathbf{J}_2^{\mathrm{L}\perp} \mathbf{J}_2 = \mathbf{0}_{1 \times 1} = 0.
\end{equation}
Da beide Matrizen nicht eindeutig sind, kann für ihre Bestimmung der folgende Ansatz gewählt werden: 
\begin{equation}
\mathbf{J}_2^{\mathrm{L}+} =
\left(
\left(\begin{matrix}
J_{2, (1,1)}
\end{matrix}\right)^{-1}	
\mathbf{0}_{1 \times 1}
\right), 		
\mathbf{J}_2^{\mathrm{L}\perp} =
\left(\begin{matrix}
-J_{2, (2,1)} & J_{2, (1,1)}
\end{matrix}\right).
\end{equation}

Durch Einsetzen der Komponenten von $\mathbf{J}_2$ folgt für die Transformationsmatrix:
\begin{equation}
	\mathbf{T}_2 =
	\left(\begin{matrix}
	\frac{\sqrt{p_{1}^{2} - 2 p_{1} q_{1} + p_{2}^{2} + q_{1}^{2}}}{- p_{1} + q_{1}} & 0\\
	\frac{p_{2}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}} & \frac{- p_{1} + q_{1}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}}
	\end{matrix}\right).
\end{equation}

Die damit transformierten verbliebenen Systemgleichungen ergeben sich zu:
\begin{subequations}
	\begin{align}
	\frac{\left(- m_{2} \ddot{p}_{1} \sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}} + \tau_{2} \left(p_{1} - q_{1}\right)\right) \sqrt{p_{1}^{2} - 2 p_{1} q_{1} + p_{2}^{2} + q_{1}^{2}}}{\left(p_{1} - q_{1}\right) \sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}} &= 0 \label{single_flat_transformed_syseq1}\\
	g\frac{m_{2} \left(- g p_{1} + g q_{1} - p_{1} \ddot{p}_{2} + p_{2} \ddot{p}_{1} + \ddot{p}_{2} q_{1}\right)}{\sqrt{p_{1}^{2} - 2 p_{1} q_{1} + p_{2}^{2} + q_{1}^{2}}}
	 &= 0\label{single_flat_transformed_syseq2}.
	\end{align}
\end{subequations}

Per Konstruktion gilt für die dazu bezüglich $\mathbf{u}_1 = \tau_{2}$ gebildete Jacobi-Matrix $\mathbf{J}_2' = (\begin{matrix} 
1 & 0
\end{matrix})^T$.
Die erste transformierte Systemgleichung \eqref{single_flat_transformed_syseq1} kann somit zusammen mit $\tau_{2}$ eliminiert werden. Es verbleibt die Systemgleichung \eqref{single_flat_transformed_syseq2}, welche folgende Menge $\mathcal{M}$ an Systemgrößen und deren Ableitungen beinhaltet:
\begin{equation}
\mathcal{M} = \{p_1, \ddot{p}_1, p_2, \ddot{p}_2, q_1 \}.
\end{equation}
Das rein algebraische Auftreten von $q_1$ legt nahe, dass eine Parametrisierung dieser und aller weiteren Systemgrößen durch einen flachen Ausgang $\mathbf{y} = (p_1, p_2)^T$ möglich ist. Es wird nun begonnen, in umgekehrter Reihenfolge zur Elimination die Systemgrößen durch $\mathbf{y}$ zu parametrisieren. Aus Gleichung \eqref{single_flat_transformed_syseq2} folgt:
\begin{equation}
	q_1 = \frac{g p_{1} + p_{1} \ddot{p}_{2} - p_{2} \ddot{p}_{1}}{g + \ddot{p}_{2}}.
	\label{eq:single_crane_flat_q1}
\end{equation}
Durch die transformierte Systemgleichung \eqref{single_flat_transformed_syseq1} kann unter Einsetzen von \eqref{eq:single_crane_flat_q1} die Eingangskomponente $\tau_2$ bestimmt werden:
\begin{equation}
	\tau_2 = \frac{m_{2} \ddot{p}_{1} \sqrt{p_{2}^{2} + \left(p_{1} - \frac{g p_{1} + p_{1} \ddot{p}_{2} - p_{2} \ddot{p}_{1}}{g + \ddot{p}_{2}}\right)^{2}}}{p_{1} - \frac{g p_{1} + p_{1} \ddot{p}_{2} - p_{2} \ddot{p}_{1}}{g + \ddot{p}_{2}}}.
	\label{eq:single_crane_flat_tau2}
\end{equation}
Die zuerst eliminierte originale Systemgleichung~\eqref{single_flat_syseq3} kann nach $\tau_1$ aufgelöst werden:
\begin{equation}
	\tau_1 = \frac{m_{1} \ddot{q}_{1} \sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}} + p_{1} \tau_{2} - q_{1} \tau_{2}}{\sqrt{p_{2}^{2} + \left(p_{1} - q_{1}\right)^{2}}}.
	\label{eq:single_crane_preflat_tau1}
\end{equation}
Diese Darstellung enthält allerdings mit $q_1$ sowie $\ddot{q}_1$ und $\tau_2$ Größen, welche keine Komponenten des flachen Ausgangs sind. Die Ableitung $\ddot{q}_1$ kann zu
\begin{flalign}
	\begin{split}
		\ddot{q}_1 &=
		\frac{1}{\left(g + \ddot{p}_{2}\right)^{3}}
		(- 2 \dddot{p}_{2} \left(g + \ddot{p}_{2}\right) \left(g \dot{p}_{1} + p_{1} \dddot{p}_{2} - p_{2} \dddot{p}_{1} - \ddot{p}_{1} \dot{p}_{2} + \ddot{p}_{2} \dot{p}_{1}\right) \\ 
		&+ \left(g + \ddot{p}_{2}\right)^{2} \left(g \ddot{p}_{1} + p_{1} \ddddot{p}_{2} - p_{2} \ddddot{p}_{1} - 2 \dddot{p}_{1} \dot{p}_{2} + 2 \dddot{p}_{2} \dot{p}_{1}\right) \\ 
		&- \left(\ddddot{p}_{2} \left(g + \ddot{p}_{2}\right) - 2 \dddot{p}_{2}^{2}\right) \left(g p_{1} + p_{1} \ddot{p}_{2} - p_{2} \ddot{p}_{1}\right))
	\end{split}
\end{flalign}
gebildet werden. Durch einsetzen davon, Gleichung \eqref{eq:single_crane_flat_q1} und \eqref{eq:single_crane_flat_tau2} in \eqref{eq:single_crane_preflat_tau1} wird eine Parametrisierung von $\tau_1$ durch den flachen Ausgang gewonnen:
\begin{flalign}
	\begin{split}
		\tau_2 &=
		\frac{1}{g^{3} + 3 g^{2} \ddot{p}_{2} + 3 g \ddot{p}_{2}^{2} + \ddot{p}_{2}^{3}}
		(g^{3} m_{1} \ddot{p}_{1} + g^{3} m_{2} \ddot{p}_{1} - g^{2} m_{1} p_{2} \ddddot{p}_{1} - 2 g^{2} m_{1} \dddot{p}_{1} \dot{p}_{2} \\
		&+ 2 g^{2} m_{1} \ddot{p}_{1} \ddot{p}_{2} + 3 g^{2} m_{2} \ddot{p}_{1} \ddot{p}_{2} - 2 g m_{1} p_{2} \ddddot{p}_{1} \ddot{p}_{2} + g m_{1} p_{2} \ddddot{p}_{2} \ddot{p}_{1} + 2 g m_{1} p_{2} \dddot{p}_{1} \dddot{p}_{2} \\
		&- 4 g m_{1} \dddot{p}_{1} \ddot{p}_{2} \dot{p}_{2} + 2 g m_{1} \dddot{p}_{2} \ddot{p}_{1} \dot{p}_{2} + g m_{1} \ddot{p}_{1} \ddot{p}_{2}^{2} + 3 g m_{2} \ddot{p}_{1} \ddot{p}_{2}^{2} - m_{1} p_{2} \ddddot{p}_{1} \ddot{p}_{2}^{2} \\
		&+ m_{1} p_{2} \ddddot{p}_{2} \ddot{p}_{1} \ddot{p}_{2} + 2 m_{1} p_{2} \dddot{p}_{1} \dddot{p}_{2} \ddot{p}_{2} - 2 m_{1} p_{2} \dddot{p}_{2}^{2} \ddot{p}_{1} - 2 m_{1} \dddot{p}_{1} \ddot{p}_{2}^{2} \dot{p}_{2} \\
		&+ 2 m_{1} \dddot{p}_{2} \ddot{p}_{1} \ddot{p}_{2} \dot{p}_{2} + m_{2} \ddot{p}_{1} \ddot{p}_{2}^{3}).
	\end{split}
\end{flalign}

Die Parametrisierung aller Systemgrößen durch $\mathbf{y} = (p_1, p_2)^T$ zeigt, dass es sich dabei um einen flachen Ausgang handelt. Der Flachheitsnachweis wurde somit konstruktiv erbracht.

\section{Flachheitsanalyse am Doppelkran}
\label{sec:flatness_analysis_double_crane}

Eine Implementierung der in diesem Abschnitt durchgeführten Überlegungen ist unter \cite[flatness\_notebooks/ODE\_flatness\_analysis.ipynb]{SAGithub} zu finden.

Aus der analytischen Modellbildung des Doppelkransystems mit den LG zweiter Art im Unterabschnitt \ref{subsec:double_crane_lagrange2} folgen die fünf Systemgleichungen \eqref{double_flat_syseqs}, welche als Grundlage des Flachheitsnachweises dienen. 

Zunächst wird die Jacobi-Matrix dieser Gleichungen bezüglich $\boldsymbol{\tau} = \mathbf{u}_4 = (\tau_1, \tau_2, \tau_3, \tau_4)^T$ gebildet (Abkürzungen $\nu_x := \sin{x}$ und $\mu_x := \cos{x}$):
\begin{equation*}
	\mathbf{J}_5 = 
	\left(\begin{smallmatrix}
	0 & 0 & - \frac{p_{1} - q_{1} - s_{2} \mu_{\left(p_{3} \right)}}{l_{1}} & - \frac{- l_{0} + p_{1} - q_{2} + s_{2} \mu_{\left(p_{3} \right)}}{l_{2}}\\
	0 & 0 & - \frac{p_{2} - s_{2} \nu_{\left(p_{3} \right)}}{l_{1}} & - \frac{p_{2} + s_{2} \nu_{\left(p_{3} \right)}}{l_{2}}\\
	0 & 0 & \frac{s_{2} \left(p_{2} - s_{2} \nu_{\left(p_{3} \right)}\right) \mu_{\left(p_{3} \right)}}{l_{1}} - \frac{s_{2} \left(p_{1} - q_{1} - s_{2} \mu_{\left(p_{3} \right)}\right) \nu_{\left(p_{3} \right)}}{l_{1}} & - \frac{s_{2} \left(p_{2} + s_{2} \nu_{\left(p_{3} \right)}\right) \mu_{\left(p_{3} \right)}}{l_{2}} + \frac{s_{2} \left(- l_{0} + p_{1} - q_{2} + s_{2} \mu_{\left(p_{3} \right)}\right) \nu_{\left(p_{3} \right)}}{l_{2}}\\
	-1 & 0 & \frac{p_{1} - q_{1} - s_{2} \mu_{\left(p_{3} \right)}}{l_{1}} & 0\\
	0 & -1 & 0 & \frac{- l_{0} + p_{1} - q_{2} + s_{2} \mu_{\left(p_{3} \right)}}{l_{2}}
	\end{smallmatrix}\right).
\end{equation*}
Dabei ist zu erkennen, dass in den letzten beiden Systemgleichungen, die zu den  Spalten der Jacobi-Matrix korrespondieren, zwei Eingangsgrößen $\tau_{1}$ und $\tau_{2}$ jeweils isoliert vorkommen. Für deren Bestimmung ergeben sich keine redundanten Gleichungen. Dementsprechend können die letzten beiden Zeilen in $\mathbf{J}_5$ sowie diese Eingangskomponenten eliminiert werden. 

Für den reduzierten Eingang $ \mathbf{u}_2 = (\tau_3$, $\tau_4)^T$ gibt es in der darauf bezogenen Jacobimatrix $\mathbf{J}_3$ zu den ersten drei Systemgleichungen  \eqref{double_flat_syseq1}, \eqref{double_flat_syseq2} und \eqref{double_flat_syseq3} keine Spalten mehr, in denen diese Eingangskomponenten nur einmal vorkommen:
\begin{equation*}
	\mathbf{J}_3 =
	\left(\begin{smallmatrix}
	- \frac{p_{1} - q_{1} - s_{2} \mu_{\left(p_{3} \right)}}{l_{1}} & - \frac{- l_{0} + p_{1} - q_{2} + s_{2} \mu_{\left(p_{3} \right)}}{l_{2}}\\
	- \frac{p_{2} - s_{2} \nu_{\left(p_{3} \right)}}{l_{1}} & - \frac{p_{2} + s_{2} \nu_{\left(p_{3} \right)}}{l_{2}}\\
	\frac{s_{2} \left(p_{2} - s_{2} \nu_{\left(p_{3} \right)}\right) \mu_{\left(p_{3} \right)}}{l_{1}} - \frac{s_{2} \left(p_{1} - q_{1} - s_{2} \mu_{\left(p_{3} \right)}\right) \nu_{\left(p_{3} \right)}}{l_{1}} & - \frac{s_{2} \left(p_{2} + s_{2} \nu_{\left(p_{3} \right)}\right) \mu_{\left(p_{3} \right)}}{l_{2}} + \frac{s_{2} \left(- l_{0} + p_{1} - q_{2} + s_{2} \mu_{\left(p_{3} \right)}\right) \nu_{\left(p_{3} \right)}}{l_{2}}
	\end{smallmatrix}\right).
\end{equation*}
Also ist eine Transformation $\mathbf{T}_3$ des Systems entsprechend der Gleichungen \eqref{eq:flatness_trafo} durchzuführen. Wegen der nicht-quadratischen Dimension von $\mathbf{J}_3$ gilt es, eine linke Pseudoinverse $\mathbf{J}_3^{\mathrm{L}+} \in \mathbb{R}^{2 \times 3}$ zu finden:
\begin{equation}
	\mathbf{J}_3^{\mathrm{L}+} \mathbf{J}_3 = \mathbf{I}_{2} = 
	\left(\begin{matrix}
	1 & 0\\
	0 & 1\\
	\end{matrix}\right),
\end{equation}
sowie das linke Orthokomplement $\mathbf{J}_3^{\mathrm{L}\perp} \in \mathbb{R}^{1 \times 3}$:
\begin{equation}
	\mathbf{J}_3^{\mathrm{L}\perp} \mathbf{J}_3 = \mathbf{0}_{1 \times 2} = 
	\left(\begin{matrix}
	0 & 0
	\end{matrix}\right).
\end{equation}
Da beide Matrizen nicht eindeutig sind, kann für ihre Bestimmung der folgende Ansatz gewählt werden: 
\begin{equation}
	\label{eq:ortho_pseudo_double_crane}
	\mathbf{J}_3^{\mathrm{L}+} =
	\left(
	\left(\begin{matrix}
		J_{3, (1,1)} & J_{3, (1,2)}\\
		J_{3, (2,1)} & J_{3, (2,2)}\\
	\end{matrix}\right)^{-1}	
	\mathbf{0}_{2 \times 1}
	\right), 		
	\mathbf{J}_3^{\mathrm{L}\perp} =
	\left(\begin{matrix}
		J_{3, (2,1)} J_{3, (3,2)} - J_{3, (2,2)} J_{3, (3,1)} \\
		-J_{3, (1,1)} J_{3, (3,2)} + J_{3, (1,2)} J_{3, (3,1)} \\
		J_{3, (1,1)} J_{3, (2,2)} - J_{3, (1,2)} J_{3, (2,1)}
	\end{matrix}\right)^T.
\end{equation}

Durch Einsetzen der Komponenten von $\mathbf{J}_2$ in \eqref{eq:ortho_pseudo_double_crane} kann die Transformationsmatrix $\mathbf{T}_3$ nach den Gleichungen \eqref{eq:flatness_trafo} berechnet werden. Auf die konkrete Angabe dieser sowie der später vorgenommenen Parametrisierungen aller Systemgrößen wird aus Platz- und Praktikabilitätsgründen verzichtet und stattdessen auf das zu Beginn dieses Abschnitts \ref{sec:flatness_analysis_double_crane} erwähnte Jupyter-Notebook verwiesen. Aus der Multiplikation der somit gefundenen Transformationsmatrix $\mathbf{T}_3$ mit den übrigen drei Systemgleichungen lassen sich entsprechend der Anforderungen an ihre Konstruktion anschließend die noch übrigen Eingangskomponenten $\tau_{3}$ und $\tau_{4}$ sowie die ersten beiden transformierten Systemgleichungen eliminieren.

Die letzte verbliebene Systemgleichung enthält folgende Menge $\mathcal{M}$ an Systemgrößen und deren Ableitungen:
\begin{equation}
	\mathcal{M} = \{p_1, p_2, p_3, \ddot{p}_1, \ddot{p}_2, \ddot{p}_3, q_1, q_2 \}.
\end{equation}
In dieser Gleichung sind sowohl $q_1$ als auch $q_2$ rein algebraisch enthalten. Eine dieser beiden Größen kann also ebenso wie der Eingang $\boldsymbol{\tau}$ eliminiert werden. Die übrigen Systemgrößen bilden einen flachen Ausgang $\mathbf{y} = (p_1, p_2, p_3, q_1)^T$ oder alternativ ${\tilde{\mathbf{y}} = (p_1, p_2, p_3, q_2)^T}$.

Die zur Eliminierung umgeformten Systemgleichungen ermöglichen die Parametrisierung der Systemgrößen durch einen flachen Ausgang, welche durch sukzessives Umformen und ggf. ineinander Einsetzen der (transformierten) Systemgleichungen in umgekehrter Reihenfolge zur Elimination analog zu Abschnitt \ref{sec:flatness_single_crane} erfolgt. Eine abschließende flache Parametrisierung aller Systemgrößen durch den flachen Ausgang $\mathbf{y} = (p_1, p_2, p_3, q_1)^T$ enthält folgende funktionale Zusammenhänge:
\begin{subequations}
	\begin{align}
		q_2 &= \mathrm{func}(p_1, \ddot{p}_1, p_2, \ddot{p}_2, p_3, \ddot{p}_3, q_1) \\
		\tau_1 &= \mathrm{func}(p_1, \ddot{p}_1, p_2, \ddot{p}_2, p_3, \ddot{p}_3, q_1, \ddot{q}_1) \\
		\tau_2 &= \mathrm{func}(p_1, \dot{p}_1, \ddot{p}_1, p_1^{(3)}, p_1^{(4)}, p_2, \dot{p}_2, \ddot{p}_2, p_2^{(3)}, p_2^{(4)}, p_3, \dot{p}_3, \ddot{p}_3, p_3^{(3)}, p_3^{(4)}, q_1, \dot{q}_1, \ddot{q}_1) \label{subeq:tau2_parametrization_double_crane} \\
		\tau_3 &= \mathrm{func}(p_1, \ddot{p}_1, p_2, \ddot{p}_2, p_3, \ddot{p}_3, q_1) \\
		\tau_4 &= \mathrm{func}(p_1, \ddot{p}_1, p_2, \ddot{p}_2, p_3, \ddot{p}_3, q_1).
	\end{align}
\end{subequations}
Die Symbolik $\mathrm{func}$ stellt in dieser Arbeit einen allgemeinen und nicht weiter spezifizierten funktionalen Zusammenhang dar, welcher sich bei jeder Erwähnung unterscheiden kann.

\chapter{Steuerungs- und Regelungsentwurf}
Auf Grundlage der Flachheitsanalyse des Brückenkransystems ist es im Folgenden möglich, Referenztrajektorien für einen flachen Ausgang aufzustellen, die Eingangsgrößen danach zu parametrisieren und eine Folgerelung dafür zu ermitteln. 

\section{Trajektorienplanung für den flachen Ausgang}
\label{sec:trajectory_flat_output}
Aufgabe der Trajektorienplanung ist es, Zeitverläufe des flachen Ausgangs vorzugeben, anhand derer später die Eingänge parametriert werden können, um eine Überführung des Kransystems zwischen zwei Ruhelagen zu ermöglichen. Für den real vorhandenen Versuchsstand gibt es bisher keine formal spezifizierten Grenzwerten für die Beschleunigungen oder die maximalen Geschwindigkeiten seiner Komponenten. Aus physikalischer beziehungsweise technischer Sicht ist es sinnvoll, eine Planung der Referenztrajektorien so vorzunehmen, dass die Stell- bzw. Eingangsgrößen des Systems stetig verlaufen.

Aufgrund der einfachen Vorgabe von Randbedingungen und Erfüllung von Differenzierbarkeitsbedingungen ist die Wahl eines polynombasierten Trajektorienansatzes sinnvoll. Aus der Flachheitsanalyse in Abschnitt \ref{sec:flatness_analysis_double_crane} ist ersichtlich, dass für den flachen Ausgang ${\mathbf{y} = (y_1, y_2, y_3, y_4)^T = (p_1, p_2, p_3, q_1)^T}$ der Eingang $\tau_2 \stackrel{\eqref{subeq:tau2_parametrization_double_crane}}{=} \mathrm{func}(y_1^{(4)}, y_2^{(4)}, y_3^{(4)}, \ddot{y}_4, ...)$ die höchsten Ausgangsableitungen aufweist. Damit für die polynomialen Trajektorien außerdem aus den Ruhelagen $(t_0, y_{i, 0})$  ein stetig differenzierbarer Übergang der Eingangsgrößenverläufe (ohne Sprünge an den Rändern) in die Ruhelage $(t_e, y_{i, e})$ gewährleistet werden kann, müssen demnach folgende 36 Bedingungen erfüllt sein \cite[S.~230]{NLRT_Roebenack}:
\begin{align}
	\begin{split}
	y_i(t_0) &= y_{i, 0}  \quad \text{für } i = 1,2,3,4 \\
	y_i(t_e) &= y_{i, e}  \quad \text{für } i = 1,2,3,4 \\
	\dot{y}_i(t_0) &= \ddot{y}_i(t_0) = y_i^{(3)}(t_0) = y_i^{(4)}(t_0) = 0 \quad \text{für } i = 1,2,3 \\
	\dot{y}_i(t_e) &= \ddot{y}_i(t_e) = y_i^{(3)}(t_e) = y_i^{(4)}(t_e) = 0 \quad \text{für } i = 1,2,3 \\
	\dot{y}_4(t_0) &= \ddot{y}_4(t_0) = 0 \\
	\dot{y}_4(t_e) &= \ddot{y}_4(t_e) = 0.
	\end{split}
\end{align}

Es ergeben sich Ansatzfunktionen für die Trajektorien des flachen Ausgangs mit jeweiliger Ordnung $2 N_i - 1$, wobei $N_i$ der Anzahl der Randbedingungen des jeweiligen Ausgangs entspricht:
\begin{align}
	\label{eq:polynomes_ref_trajectories}
	\begin{split}
	y_i(t) &= a_{i, 9} t^9 + a_{i, 8} t^8 + ... + a_{i, 0} \quad \text{für }  i = 1,2,3; \ t_0 < t < t_e \\
	y_4(t) &= a_{4, 5} t^5 + a_{4, 4} t^4 + ... + a_{4, 0} \quad \text{für } t_0 < t < t_e.
	\end{split}
\end{align}

Die Koeffizienten der Trajektorien $a_{i, j}$ können durch Einsetzen der Randbedingungen und Lösen des resultierenden linearen Gleichungssystems bestimmt werden. In der Simualtion wurde als Implementierung dafür die Funktion \texttt{condition\_poly} der Bibliothek symbtools verwendet.


\section{Trajektorienfolgeregelung}

\subsection{Vektorieller relativer Grad}
\label{sec:definition_relative_degree}

Ein Ansatz zur Steuerung und Folgeregelung nichtlinearer Systeme fußt auf dem Prinzip der exakten Eingangs-Ausgangs-Linearisierung. Dabei bietet der sogenannte vektorielle relative Grad die Möglichkeit, Aussagen über die Entkopplung der Nichtlinearitäten zwischen den Ein- und Ausgängen von Mehrgrößensysteme zu treffen.

Es wird zunächst ein allgemeines Mehrgrößensystem mit $m$ Eingangskomponenten $u_1, ..., u_m$ und $m$ Ausgangskomponenten $y_1, ..., y_m$ betrachtet:
\begin{equation}
	\label{eq:state_space_vector_degree}
	\dot{\mathbf{x}} = \mathbf{f}(\mathbf{x}) + \mathbf{g}(\mathbf{x}) \mathbf{u}, \quad \mathbf{y} = \mathbf{h}(\mathbf{x}).
\end{equation}
Dabei gelte für den Zustand $\mathbf{x} \in \Reals^n$ sowie für die Vektorfelder $\mathbf{f}: \mathcal{M} \rightarrow \Reals^n$, ${\mathbf{h}: \mathcal{M} \rightarrow \Reals^m}$ und die Matrix $\mathbf{g} = (\mathbf{g}_1, ..., \mathbf{g}_m): \mathcal{M} \rightarrow \Reals^{n \times m}$, wobei $\mathcal{M}$ eine offene Teilmenge $\mathcal{M} \subseteq \Reals^{n}$ repräsentiert. Dieses System hat an der Stelle $\boldsymbol{\gamma} \in \mathcal{M}$ den vektoriellen relativen Grad $\mathbf{r} = (r_1, ..., r_m)^T$, falls \cite[S. 194]{NLRT_Roebenack}:
\begin{enumerate}
	\item Die Lie-Ableitungen $L_{\mathbf{g}_j} L_{\mathbf{f}}^k h_i(\mathbf{x}) = 0$ für alle $\mathbf{x}$ aus einer Umgebung von $\boldsymbol{\gamma}$ sowie für alle $i,j \in \{1, ..., m\}$ und $k \in \{0, ..., r-2\}$ und
	\item die sogenannte Entkopplungsmatrix
		\begin{equation}
		\label{eq:decoupling_matrix}
		\boldsymbol{\Lambda} = 
		\left(\begin{matrix}
		L_{\mathbf{g}_1} L_{\mathbf{f}}^{r_1 -1} h_1(\mathbf{x}) & \hdots & L_{\mathbf{g}_m} L_{\mathbf{f}}^{r_1 -1} h_1(\mathbf{x}) \\
		\vdots & \ddots & \vdots \\
		L_{\mathbf{g}_1} L_{\mathbf{f}}^{r_m -1} h_m(\mathbf{x}) & \hdots & L_{\mathbf{g}_m} L_{\mathbf{f}}^{r_m -1} h_m(\mathbf{x})
		\end{matrix}\right) 
	\end{equation}
	
	im Punkt $\mathbf{x} = \boldsymbol{\gamma}$ regulär ist.
\end{enumerate}

Die Regularität der Entkopplungsmatrix ist keineswegs selbstverständlich. Im Fall einer Singularität ist der vektorielle relative Grad an dieser Stelle nicht wohldefiniert.

\subsection{Statische Rückführung}
\label{sec:static_state_feedback}
Ein vergleichsweise einfacher systematischer Ansatz zum Entwurf einer Folgeregelung entlang einer Referenztrajektorie ist die statische Rückführung gemessener Zustandskomponenten. Die Umsetzbarkeit dieses Ansatzes hängt allerdings von der Wohldefiniertheit des vektoriellen relativen Grades ab.

Durch die Rückkopplung gemessener Zustandskomponenten soll eine Stabilisierung des Systems und Folgeregelung entlang der Referenztrajektorien erreicht werden. Bei der statischen Rückführung wird ein System mit Ausgang
\begin{equation}
	\mathbf{y} = \boldsymbol{\Gamma}(\mathbf{x}) + \boldsymbol{\Lambda}(\mathbf{x}) \mathbf{u} \ \text{, } \ \boldsymbol{\Gamma}(\mathbf{x}) = (L_{\mathbf{f}}^{r_1} h_1(\mathbf{x}), ..., L_{\mathbf{f}}^{r_m} h_m(\mathbf{x}))^T
\end{equation}
betrachtet. Die nichtlineare Eingangs-Ausgangs-Verkopplung wird durch eine statische (Zustands-)Rückführung
\begin{equation}
	\label{eq:static_state_feedback}
	\boldsymbol{\Gamma}(\mathbf{x}) + \boldsymbol{\Lambda}(\mathbf{x}) \mathbf{u} \stackrel{!}{=} \mathbf{v} \Rightarrow \mathbf{u} = \boldsymbol{\Lambda}^{-1}(\mathbf{x}) \cdot (\mathbf{v} - \boldsymbol{\Gamma}(\mathbf{x}))
\end{equation}
unter Nutzung eines virtuellen Eingangs $\mathbf{v} = (v_1, ..., v_m)^T$ kompensiert. Eine lineare Eingangs-Ausgangs-Dynamik wird erreicht. Der neue virtuelle Eingang kann dann in einem zweiten Entwurfsschritt so gewählt werden, dass der Trajektorienfolgefehler einer asymptotisch stabilen DGL genügt, siehe Abschnitt \ref{sec:error_dynamics}. \cite[S. 195]{NLRT_Roebenack}

Bei dem vorliegenden Doppelkransystem kann durch Zeitableitungen der jeweiligen Komponente des flachen Ausgangs $y_i$ die damit korrespondierende Komponente des relativen Grades $r_i$ bestimmt werden. Diese entspricht der Ableitungsordnung, bei der das erste mal \textit{eine} Komponente des Eingangs $\mathbf{u}:=\boldsymbol{\tau}$ explizit auftritt. Hierbei werden die Zeitableitungen des Ausgangs durch Lie-Ableitungen entlang des Vektorfelds des Zustandsraummodells des Systems 
\begin{equation}
	\label{eq:state_space_vf}
	\boldsymbol{\delta} := \dot{\mathbf{x}} = \mathbf{f} + \mathbf{g} \boldsymbol{\tau},
\end{equation}
welches in Gleichung \eqref{eq:state_space_double_crane} bestimmt wurde, rekursiv erzeugt: 
\begin{equation}
	\label{eq:Lie_time_deriv}
	y_i^{(k)} = L_{\boldsymbol{\delta}} y_i^{(k-1)} .
\end{equation}

In Tabelle \ref{tab:relative_degrees} sind die daraus bestimmten relativen Grade sowie die dabei explizit auftretenden Eingänge aufgelistet.
\begin{table}[htbp]%
	\centering
	\caption{Relative Grade der Ausgänge und explizites Auftreten der Eingänge.}
	\label{tab:relative_degrees}
	\begin{tabular}{c| c c c c} 
		\toprule
		Index $i$ & 1 & 2 & 3 & 4 \\ 
		\hline
		Komponente des vektoriellen relativen Grades $r_i$ & 2 & 2 & 2 & 2\\ 
		\hline
		explizities Auftreten von $\tau_j$ bei $y_i^{(r_i)}$ & $\tau_3, \tau_4$ & $\tau_3, \tau_4$ & $\tau_3, \tau_4$ & $\tau_1, \tau_3$ \\
		\hline
		$y_j^{(k)}$ mit minimalem $k$, bei dem $\tau_i$ zuerst auftritt & $y_4^{(2)}$ & $y_{1,2,3}^{(4)}$ & $y_{1,2,3,4}^{(2)}$ & $y_{1,2,3}^{(2)}$\\
		\bottomrule
	\end{tabular}
\end{table}

Das Fehlen von $\tau_2$ bei all diesen Ausgangsableitungen bedeutet für die Entkopplungsmatrix $\boldsymbol{\Lambda}$ gemäß Gleichung \eqref{eq:decoupling_matrix} eine Singularität, weil die zugehörige Spalte nur Nulleinträge enthält:
\begin{align}
\label{eq:Lambda_double_crane}
	\boldsymbol{\Lambda} = 
	\left(\begin{smallmatrix}
		0 & 0 & \frac{p_{1} - q_{1} - s_{2} \cos{\left(p_{3} \right)}}{m_{2} \sqrt{\left(p_{2} - s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(- p_{1} + q_{1} + s_{2} \cos{\left(p_{3} \right)}\right)^{2}}} & \frac{- l_{0} + p_{1} - q_{2} + s_{2} \cos{\left(p_{3} \right)}}{m_{2} \sqrt{\left(p_{2} + s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(l_{0} - p_{1} + q_{2} - s_{2} \cos{\left(p_{3} \right)}\right)^{2}}}\\
		0 & 0 & \frac{p_{2} - s_{2} \sin{\left(p_{3} \right)}}{m_{2} \sqrt{\left(p_{2} - s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(- p_{1} + q_{1} + s_{2} \cos{\left(p_{3} \right)}\right)^{2}}} & \frac{p_{2} + s_{2} \sin{\left(p_{3} \right)}}{m_{2} \sqrt{\left(p_{2} + s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(l_{0} - p_{1} + q_{2} - s_{2} \cos{\left(p_{3} \right)}\right)^{2}}}\\
		0 & 0 & \frac{s_{2} \left(p_{1} \sin{\left(p_{3} \right)} - p_{2} \cos{\left(p_{3} \right)} - q_{1} \sin{\left(p_{3} \right)}\right)}{J_{2} \sqrt{\left(p_{2} - s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(- p_{1} + q_{1} + s_{2} \cos{\left(p_{3} \right)}\right)^{2}}} & \frac{s_{2} \left(l_{0} \sin{\left(p_{3} \right)} - p_{1} \sin{\left(p_{3} \right)} + p_{2} \cos{\left(p_{3} \right)} + q_{2} \sin{\left(p_{3} \right)}\right)}{J_{2} \sqrt{\left(p_{2} + s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(l_{0} - p_{1} + q_{2} - s_{2} \cos{\left(p_{3} \right)}\right)^{2}}}\\
		\frac{1}{m_{1}} & 0 & \frac{- p_{1} + q_{1} + s_{2} \cos{\left(p_{3} \right)}}{m_{1} \sqrt{\left(p_{2} - s_{2} \sin{\left(p_{3} \right)}\right)^{2} + \left(- p_{1} + q_{1} + s_{2} \cos{\left(p_{3} \right)}\right)^{2}}} & 0
	\end{smallmatrix}\right) .
\end{align}
Der einzige von Null verschiedene Eintrag in der zweiten Spalte $\mathbf{g}_2$ der Eingangsmatrix $\mathbf{g}$ erfolgt nämlich durch $g_{10, 2} = \frac{1}{m_3}$ und die Lie-Ableitungen $L_{\mathbf{f}} y_i = \dot{y}_i$ geben nur die zeitliche Ableitung des flachen Ausgangs $\dot{\mathbf{y}} = (\dot{p}_1, \dot{p}_2, \dot{p}_3, \dot{q}_1)^T$ wieder. So folgt für das relevante Produkt $\partiell{}{\dot{q}_2} L_{\mathbf{f}} y_i \cdot g_{10, 2} = \partiell{}{\dot{q}_2} \dot{y}_i \cdot g_{10, 2} = 0$ für $i = 1,..., 4$, weil $\dot{q}_2 \not\in \dot{\mathbf{y}}$. Allgemeiner gilt, dass ein Eingang $\tau_j$ in den Komponenten der Ausgangsableitung $y_i^{(r_i)}$ genau dann nicht explizit auftritt, also die $j$-te Spalte von $\boldsymbol{\Lambda}$ eine Nullspalte ist, wenn für alle zugehörigen gemischten Lie-Ableitungen $L_{\mathbf{g}_j} L_{\mathbf{f}}^{r_i-1} y_i = 0$ mit $i = 1, ..., m$ gilt. \cite[S. 201]{NLRT_Roebenack}

Analog gilt dies für den alternativen flachen Ausgang $\tilde{\mathbf{y}} = (p_1, p_2, p_3, q_2)^T$ aufgrund des Fehlens von $\tau_1$, welches eine erste Nullspalte von $\boldsymbol{\Lambda}$ impliziert.

Daher ist die Entkopplungsmatrix $\boldsymbol{\Lambda}$ in dieser Form nie regulär und der vektorielle relative Grad $\mathbf{r}$ nie wohldefiniert. Das Doppelkransystem ist in dieser Eingangs-Ausgangskonfiguration also nicht statisch eingangs-ausgangs-linearisierbar. Stattdessen wird zur Regelung des Doppelkransystems ein Ansatz mit einer dynamischen Erweiterung oder quasi-statischen Zustandsrückführung verfolgt. 

\subsection{Zustandsrückführung aus Fehlerdynamik}
\label{sec:error_dynamics}
Nicht nur bei der statischen Rückführung sondern nach jeglicher Kompensation der Nichtlinearitäten ist die Wahl einer Stabilisierung bezüglich der Abweichung von der Referenztrajektorie vozunehmen.

Nach \cite[S. 195]{NLRT_Roebenack} kann eine lineare Fehlerdynamik bezüglich des Trajektorienfolgefehlers $e_i := y_i - y_{i, \text{ref}}$ mit dem Messwert bzw. simuliertem Wert $y_i$ und dem Wert der Referenztrajektorie $y_{i, \text{ref}} = \mathrm{func}(t)$. In der Literatur wird an dieser Stelle lediglich die Abweichung bezüglich eines Festwerts $y_{i, \text{ref}} = \mathrm{const.}$ angesetzt. Damit können auch die Komponenten des virtuellen Eingangs gewählt werden:
\begin{align}
	e_i^{(r_i)} + c_{i, r_i-1} \ e_i^{(r_i-1)} + ... + c_{i, 1} \ \dot{e}_i + c_{i, 0} \ e_i = 0 
	\\
	\Leftrightarrow v_i = y_i^{(r_i)} = y_{i, \text{ref}}^{(r_i)} - c_{i, r_i-1} \ e_i^{(r_i-1)} - ... - c_{i, 1} \ \dot{e}_i - c_{i, 0} \ e_i.
\end{align}
Die Koeffizienten $c_{i, k}, \ k \in {0, 1, ..., r_i-1}$ sind für eine Stabilisierung des Systems so zu wählen, dass das charakteristische Polynom dieser Gleichung ausschließlich Nullstellen mit negativem Realteil aufweist. Die konkrete Wahl der Koeffizienten bzw. der Nullstellen stellt einen Entwurfsfreiheitsgrad dar.

\subsection{Dynamische Erweiterung}
\label{sec_dynamic_extension_control}
Eine Implementierung der in diesem Abschnitt durchgeführten Überlegungen ist unter \cite[flatness\_notebooks/ODE\_flatness\_trajectory\_control\_simulation\_dyn.ipynb]{SAGithub} zu finden.

Die in \eqref{eq:Lambda_double_crane} berechnete Entkopplungsmatrix $\boldsymbol{\Lambda}$ hat eine Nullspalte, weil $\tau_2$ in keiner Ableitung der Ausgangskomponenten $y_i^{(r_i)}$ explizit auftritt. Somit gilt ${\text{rang} \ \boldsymbol{\Lambda} =: k = 3 < m = 4}$. Um durch eine andere Definition der Eingänge eine reguläre Entkopplungsmatrix $\tilde{\boldsymbol{\Lambda}}$ zu erhalten, muss also verhindert werden, dass die drei sonstigen Eingangskomponenten $\tau_1$, $\tau_3$ und $\tau_4$ in allen Ausgangsableitungen bereits bei der Ableitungsordnung 2 auftreten. Tabelle \ref{tab:relative_degrees} kann entnommen werden, dass $\tau_{2}$ das erste Mal in einer der Ausgangsableitungen der Ordnung 4 von $y_1$, $y_2$ oder $y_3$ auftritt. Daher ist eine Ergänzung aller $k = 3$ Eingangskomponenten außer $\tau_2$ um jeweils zwei Integratoren vorzunehmen. \cite[S. 200]{NLRT_Roebenack} 

Für die Integration werden drei weitere Zustandskomponenten $\alpha_1$, $\alpha_3$ und $\alpha_4$ sowie die neuen Eingangskomponenten $\beta_1$, $\beta_3$ und $\beta_4$ eingeführt. Die Eingangskomponenten $\tau_1$, $\tau_3$ und $\tau_4$ werden nun als Zustandskomponenten aufgefasst. Physikalisch bleibt das System allerdings unverändert. Einzig die Berechnung der Stellgrößen dieser Komponenten wird angepasst, indem nicht die jeweiligen Kräfte sondern ihre zweiten Zeitableitungen vorgegeben werden.

So treten die neuen Eingangskomponenten ebenso wie $\tau_2$ das erste mal bei der Ableitungsordnung 4 explizit auf. Die Systemgleichungen werden demnach um die folgenden DGL dynamisch erweitert:
\begin{align}
	\begin{split}
		\dot{\tau}_1 &=: \alpha_1 \\
		\dot{\tau}_3 &=: \alpha_3 \\
		\dot{\tau}_4 &=: \alpha_4 \\
		\dot{\alpha}_1 &=: \beta_1 \\
		\dot{\alpha}_3 &=: \beta_3 \\
		\dot{\alpha}_4 &=: \beta_4 .
	\end{split}
\end{align}

Daraus folgt die Definition eines neuen Eingangsvektors unter Umsortierung der Komponente $\tau_2$ an die letzte Stelle \cite[S. 201]{NLRT_Roebenack}:
\begin{equation}
	\tilde{\boldsymbol{\tau}} := (\beta_1, \beta_3, \beta_4, \tau_2)^T.
\end{equation}
Der Zustandsvektor wird auf
\begin{equation}
	\tilde{\mathbf{x}} := (\mathbf{x}, \tau_1, \tau_3, \tau_4, \alpha_1, \alpha_3, \alpha_4)^T
\end{equation}
erweitert. Die Ausgangsableitungen werden analog zu den Gleichungen \eqref{eq:state_space_vf} und \eqref{eq:Lie_time_deriv} rekursiv über Lie-Ableitungen entlang der erweiterten Zustandsgleichungen 
\begin{equation}
	\tilde{\boldsymbol{\delta}} := \mathbf{\tilde{f}} + \mathbf{\tilde{g}} \tilde{\boldsymbol{\tau}}
\end{equation}
mit
\begin{align}
	\tilde{\boldsymbol{\delta}} :=
	\left(\boldsymbol{\delta},
		\alpha_1,
		\alpha_3,
		\alpha_4,
		\beta_1,
		\beta_3,
		\beta_4 \right)^T, \quad
	\mathbf{\tilde{f}} := \tilde{\boldsymbol{\delta}}|_{\tilde{\boldsymbol{\tau}} = 0}, \quad
	\mathbf{\tilde{g}} := \partiell{\tilde{\boldsymbol{\delta}}}{\tilde{\boldsymbol{\tau}}}
\end{align}
gebildet.

Für dieses modifizierte System folgt somit $r_i = 4$ für $i = 1, ..., 4$. Dieser relative Grad ist für eine Auswahl prototypischer Referenztrajektorien wohldefiniert, da Bedingung 1 aus Abschnitt \ref{sec:definition_relative_degree} erfüllt ist und die Inverse der dynamisch erweiterten Entkopplungsmatrix ($*$ repräsentieren Einträge verschieden von Null)
\begin{equation}
	\tilde{\boldsymbol{\Lambda}} =
	\left(\begin{matrix}
		0 & * & * & * \\
		0 & * & * & * \\
		0 & * & * & * \\
		* & * & 0 & 0 \\
	\end{matrix}\right)
\end{equation}
stets existiert, also regulär ist. Dementsprechend ist eine Zustandsrückführung nach Gleichung \eqref{eq:static_state_feedback} möglich. Diese wird als dynamische Rückführung bezeichnet. 

Prototypische Trajektorien beim Übergang zwischen zwei Ruhelagen mit einem auszuregelnden Anfangsfehler sind in Abbildung \ref{fig_dyn_controller_initial_error} dargestellt. Die Zwiebelschalendiagramme in Abbildung \ref{onion_skinned_dyn_controller_initial_error} zeigen eine geometrische Veranschaulichung des selben Sachverhalts. Dabei ist die Bewegung der vier Gelenke sowie der beiden Seile und der Last dargestellt. Für spätere Simulationszeitpunkte sind diese Momentaufnahmen der Konfiguration des Doppelkransystems dunkler dargestellt.

Ein Nachteil der dynamischen Rückführung ist die höhere Trägheit des Systems beim Ausregeln von Abweichungen von der Solltrajektorie, welche durch die zusätzlichen Integratoren vor den Systemeingängen hervorgerufen werden. So ist es notwendig die Pole der Fehlerdynamik für ein schnelles Ausgleichen von Anfangsfehlern relativ weit links in der komplexen Ebene zu platzieren. Zudem ergeben sich sehr lange Simulationsdauern, welche auch aus den relativ komplexen Stellgesetzen mit mehr als 20 000 Operationen je Eingangsgröße folgen. 

Auf die konkrete symbolische Angabe der Stellgesetze des Systemeingangs wird aus Platz- und Praktikabilitätsgründen verzichtet und stattdessen auf das zu Beginn dieses Teilabschnitts \ref{sec_dynamic_extension_control} erwähnte Jupyter-Notebook verwiesen. Übersichtlicher ist an dieser Stelle eine Angabe von funktionalen Abhängigkeiten:
\begin{subequations}
	\begin{align}
		\beta_1 &= \mathrm{func}(\mathbf{x}, \tau_1, \tau_3, \tau_4, \alpha_1, \alpha_3, \alpha_4, \mathbf{y}_{\mathrm{ref}}, \dot{\mathbf{y}}_{\mathrm{ref}}, \ddot{\mathbf{y}}_{\mathrm{ref}}, \mathbf{y}_{\mathrm{ref}}^{(3)}, \mathbf{y}_{\mathrm{ref}}^{(4)}) \\
		\beta_3 &= \mathrm{func}(\mathbf{x}, \tau_1, \tau_3, \tau_4, \alpha_3, \alpha_4, \mathbf{y}_{\mathrm{ref}}, \dot{\mathbf{y}}_{\mathrm{ref}}, \ddot{\mathbf{y}}_{\mathrm{ref}}, \mathbf{y}_{\mathrm{ref}}^{(3)}, \mathbf{y}_{\mathrm{ref}}^{(4)}) \\
		\beta_4 &= \mathrm{func}(\mathbf{x}, \tau_1, \tau_3, \tau_4, \alpha_3, \alpha_4, \mathbf{y}_{\mathrm{ref}}, \dot{\mathbf{y}}_{\mathrm{ref}}, \ddot{\mathbf{y}}_{\mathrm{ref}}, \mathbf{y}_{\mathrm{ref}}^{(3)}, \mathbf{y}_{\mathrm{ref}}^{(4)}) \\
		\tau_2 &= \mathrm{func}(\mathbf{x}, \tau_1, \tau_3, \tau_4, \alpha_3, \alpha_4, \mathbf{y}_{\mathrm{ref}}, \dot{\mathbf{y}}_{\mathrm{ref}}, \ddot{\mathbf{y}}_{\mathrm{ref}}, \mathbf{y}_{\mathrm{ref}}^{(3)}, \mathbf{y}_{\mathrm{ref}}^{(4)}).
	\end{align}
\end{subequations}

\subsubsection{Anpassung der Trajektorienplanung}
Durch die Einführung von jeweils zwei Integratoren nach den neuen Stellgrößen $\beta_1$, $\beta_3$ und $\beta_4$ ist an beide Rändern jeder Referenztrajektorie der flachen Ausgangskomponenten $y_i$ auch eine um  jeweils zwei Ordnungen höhere Forderung an die stetige Differenzierbarkeit zu stellen. Das Vorgehen nach Abschnitt \ref{sec:trajectory_flat_output} kann erneut analog durchgeführt werden mit jeweils um vier Ordnungen höheren Polynomen der Ausgangstrajektorien in den Gleichungen \eqref{eq:polynomes_ref_trajectories}.

\begin{figure}[H]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=1]{Pictures/dyn_controller_initial_error}
	\end{center}
	\caption[Trajektorien Ruhelagenüberführung mit Regelung über dynamische Erweiterung]
	{Prototypische Trajektorien des Doppelkransystems bei der Überführung zwischen zwei Ruhelagen unter der Ausregelung von Anfangsfehlern über die dynamische Erweiterung. Koordinatenbezeichnung entsprechend Abbildung \ref{fig:double_crane_diagram}.}
	\label{fig_dyn_controller_initial_error}
\end{figure}

\begin{figure}[H]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=1]{Pictures/onion_skinned_dynamic}
	\end{center}
	\caption[Zwiebelschalendiagramm Ruhelagenüberführung mit Regelung über dynamische Erweiterung]
	{Zwiebelschalendiagramme der Bewegung der vier Gelenke sowie der beiden Seile und der Last für prototypische Trajektorien des Doppelkransystems bei der Überführung zwischen zwei Ruhelagen unter der Ausregelung von Anfangsfehlern über die dynamische Erweiterung.}
	\label{onion_skinned_dyn_controller_initial_error}
\end{figure}

\subsection{Quasi-statische Rückführungen}
\label{sec:quasi_static_control}
Eine Implementierung der in diesem Abschnitt durchgeführten Überlegungen ist unter \cite[flatness\_notebooks/ODE\_flatness\_trajectory\_control\_simulation\_qstat.ipynb]{SAGithub} zu finden.

Ebenso wie die dynamische Erweiterung kann eine quasi-statische Zustandsrückführung bei einem nicht wohldefinierten relativen vektoriellen Grad im statischen Ansatz zur Stabilisierung des Systems angesetzt werden. Dafür wird das Vorgehen nach \cite[S. 206]{NLRT_Roebenack} im Folgenden nachvollzogen und am Doppelkransystem angewendet. Tabelle \ref{tab:input_occurence} stellt für jede Eingangskomponente die Ableitungsordnung jeder Ausgangskomponente von $\mathbf{y}$ gegenüber.

\begin{table}[htbp]%
	\centering
	\caption{Auftreten der Eingänge $\tau_j$ bei Ableitungsordnung $k$ der Ausgänge $y_i$.}
	\label{tab:input_occurence}
	\begin{tabular}{ c| c c c c } 
		\toprule
		$k$ & $\tau_1$ & $\tau_2$ & $\tau_3$ & $\tau_4$ \\ 
		\hline
		$y_1^{(k)}$ & 4 & 4 & 2 & 2\\ 
		$y_2^{(k)}$ & 4 & 4 & 2 & 2\\
		$y_3^{(k)}$ & 4 & 4 & 2 & 2\\		
		$y_4^{(k)}$ & 2 & >4 & 2 & 4\\
		$(y_5^{(k)} = q_2^{(k)}$ & >4 & 2 & 4 & 2)\\
		\bottomrule
	\end{tabular}
\end{table}

Erneut wird o. B. d. A. der flache Ausgang ${\mathbf{y} = (y_1, y_2, y_3, y_4)^T = (p_1, p_2, p_3, q_1)^T}$ betrachtet. Die zeitlichen Ausgangsableitungen können wieder rekursiv gemäß Gleichung \eqref{eq:Lie_time_deriv} mittels Lie-Ableitungen bezüglich des hierfür erweiterten Zustandsvektors $\tilde{\mathbf{x}} = (\mathbf{x}, \boldsymbol{\tau}, \dot{\boldsymbol{\tau}})^T$ entlang des Vektorfelds der Zustandsgleichungen $\tilde{\boldsymbol{\delta}} = \tilde{\mathbf{f}} + \tilde{\mathbf{g}} \tilde{\boldsymbol{\tau}}$ mit
\begin{equation}
\tilde{\boldsymbol{\delta}} =
\left(\begin{matrix}
\mathbf{f} + \mathbf{g} \boldsymbol{\tau}\\
\dot{\boldsymbol{\tau}} \\
\ddot{\boldsymbol{\tau}}
\end{matrix}\right)
\end{equation}
generiert werden.

Die Eingangskomponente $\tau_3$ tritt zuerst bei $r_1 = 2$ in $\ddot{y}_1$ sowie auch in allen sonstigen zweiten Ableitungen des flachen Ausgangs auf. Dies gilt nicht für alle Eingangskomponenten, da der relative vektorielle Grad für $r_i = 2$ für $i = 1, ..., 4$ nicht wohldefiniert ist. Außerdem tritt $\tau_4$ auch bei $r_3 = 2$ in $\ddot{y}_1$, $\ddot{y}_2$ und $\ddot{y}_3$, nicht aber in $\ddot{y}_4$ auf. Dies entspricht nicht der in \cite[S. 206]{NLRT_Roebenack} dargestellten Form, bei der für das Auftreten von $u_2$ der Ausgang $y_2$ noch weiter differenziert werden muss. Die Eingangsgröße $\tau_2$ erscheint das erste Mal explizit bei $r_i = 4$ in $y_1^{(4)}$, $y_2^{(4)}$ oder $y_3^{(4)}$, $\tau_1$ zuerst bei $r_4 = 2$ in $\ddot{y}_4$.

Eine Definition der neuen virtuellen Eingänge $v_i$ ist so möglich:
\begin{align}
\begin{split}
	\ddot{y}_1 = \ddot{p}_1 &=: v_1 = \mathrm{func}(\mathbf{x}, \tau_3, \tau_4) \\
	y_2^{(4)} = p_2^{(4)} &=: v_2 = \mathrm{func}(\mathbf{x}, \tau_1, \tau_2, \tau_3, \tau_4, \dot{\tau}_3, \dot{\tau}_4, \ddot{\tau}_3, \ddot{\tau}_4) \\
	\ddot{y}_3 = \ddot{p}_3 &=: v_3 = \mathrm{func}(\mathbf{x}, \tau_3, \tau_4) \\
	\ddot{y}_4 = \ddot{q}_1 &=: v_4 = \mathrm{func}(\mathbf{x}, \tau_1, \tau_3) .
\end{split}
\end{align}

Daraus ist ersichtlich, dass durch ein Gleichungssystem aus $v_1$, $v_3$ und $v_4$, in denen die Eingangskomponenten $\tau_1$, $\tau_3$ und $\tau_4$ affin auftreten, eine explizite Darstellung dieser Komponenten möglich ist. Dies steht im Gegensatz zur Situation in \cite[S. 207]{NLRT_Roebenack}, bei der die relativen Grade der Ausgangskomponenten aufsteigend sind. Dabei muss kein Gleichungssystem gelöst werden, sondern es genügt das sukzessives Einsetzen der vorher berechneten Eingänge und die algebraische Umformung der abgeleiteten Ausgänge.
 
Die Berechnung von $\tau_2$ erfordert einen größeren Aufwand als bei den anderen Eingangskomponenten. Dabei ist die Substitution bisheriger Eingangskomponenten und deren Ableitungen notwendig, welche analog zu Gleichung \eqref{eq:Lie_time_deriv} aus den Lie-Ableitungen entlang $\tilde{\boldsymbol{\delta}}$ generiert werden können. Es folgt ein relativ umfangreicher Ausdruck für $\tau_2$, der zu diesem Zeitpunkt mehr als einhunderttausend Rechenoperationen enthält.

Nach \cite[S. 208]{NLRT_Roebenack} können lineare Fehlerdynamiken und daraus $\mathbf{v}$ entsprechend der jeweiligen relativen Grade der Ausgangskomponenten zur Stabilisierung des Systems angesetzt werden. Die Komponenten des virtuellen Eingangs $v_1$, $v_3$ und $v_4$ sind jeweils nur von den Zustandskomponenten $\tilde{\mathbf{x}}$ abhängig. Die Komponente $v_2$ hängt allerdings auch von den Ableitungen $\ddot{y}_2 = \ddot{p}_2$ und $y_2^{(3)} = p_2^{(3)}$ ab, welche durch Lie-Ableitungen berechnet werden können:
\begin{align}
	\label{eq:p2_derivs_Lie}
	\begin{split}
		\ddot{p}_2 &= \ddot{y}_2 = L_{\tilde{\boldsymbol{\delta}}} \dot{y}_2 = L_{\tilde{\boldsymbol{\delta}}} \dot{p}_2 \\
		p_2^{(3)} &= y_2^{(3)} = L_{\tilde{\boldsymbol{\delta}}} \ddot{p}_2.
	\end{split}
\end{align}

Außerdem werden in der Darstellung von $\tau_2$ Ableitungen der Eingangskomponenten $v_1$, $v_3$ und $v_4$ benötigt, die aus deren Fehlerdynamiken zweiter Ordnung folgen:
\begin{align}
	\begin{split}
	    \ddot{e}_i + c_{i,1} \dot{e}_i + c_{i, 0} e_i &= 0 \\
		e_i^{(3)} + c_{i, 1} \ddot{e}_i + c_{i, 0} \dot{e}_i &= 0 \\
		e_i^{(3)} + c_{i, 1} (-c_{i, 1} \dot{e}_i - c_{i, 0} e_i) + c_{i, 0} \dot{e}_i &= 0 \\
		e_i^{(3)} - c_{i, 1}^2 \dot{e}_i + c_{i, 0} \dot{e}_i - c_{i, 0} c_{i, 1} e_i &= 0 \\
		e_i^{(3)} + (c_{i, 0} - c_{i, 1}^2) \dot{e}_i - c_{i, 0} c_{i, 1} e_i &= 0 \\
		e_i^{(4)} + (c_{i, 0} - c_{i, 1}^2) \ddot{e}_i - c_{i, 0} c_{i, 1} \dot{e}_i &= 0 \\
		e_i^{(4)} + (c_{i, 0} - c_{i, 1}^2) (-c_{i, 1} \dot{e}_i - c_{i, 0} e_i) - c_{i, 0} c_{i, 1} \dot{e}_i &= 0 \\
		e_i^{(4)} + (c_{i, 1}^3 - 2 c_{i, 0} c_{i, 1}) \dot{e}_i + (c_{i, 0} c_{i, 1}^2 - c_{i, 0}^2) e_i &= 0 \\
		\Rightarrow \text{ für } i = 1,3,4: \dot{v}_i = y_i^{(3)} &= y_{i, \text{ref}}^{(3)} - (c_{i, 0} - c_{i, 1}^2) \dot{e}_i + c_{i, 0} c_{i, 1} e_i \\
		\ddot{v}_i = y_i^{(4)} &= y_{i, \text{ref}}^{(4)} - (c_{i, 1}^3 - 2 c_{i, 0} c_{i, 1}) \dot{e}_i - (c_{i, 0} c_{i, 1}^2 - c_{i, 0}^2) e_i.
	\end{split}
\end{align}

Die Komponente $v_2$ ergibt sich nach einem Ansatz vierter Ordnung unter Einbeziehung des Zusammenhangs \eqref{eq:p2_derivs_Lie}:
\begin{equation}
	v_2 = y_2^{(4)} = y_{2, \text{ref}}^{(4)} - c_{2, 3} (y_2^{(3)} - y_{2, \text{ref}}^{(3)}) - c_{2, 2} (\ddot{y}_2 - \ddot{y}_{2, \text{ref}}) - c_{2, 1} (\dot{y}_2 - \dot{y}_{2, \text{ref}}) - c_{2, 0} (y_2 - y_{2, \text{ref}})
\end{equation} 

Auf die konkrete symbolische Angabe der Stellgesetze wird aus Platz- und Praktikabilitätsgründen verzichtet und stattdessen auf das zu Beginn dieses Abschnitts \ref{sec:quasi_static_control} erwähnte Jupyter-Notebook verwiesen. Übersichtlicher ist an dieser Stelle eine Angabe von funktionalen Abhängigkeiten:
\begin{subequations}
	\begin{align}
		\tau_1 &= \mathrm{func}(\mathbf{x}, \mathbf{y}_{\mathrm{ref}}, \dot{\mathbf{y}}_{\mathrm{ref}}, \ddot{\mathbf{y}}_{\mathrm{ref}}) \\
		\tau_2 &= \mathrm{func}(\mathbf{x}, \mathbf{y}_{\mathrm{ref}}, \dot{\mathbf{y}}_{\mathrm{ref}}, \ddot{\mathbf{y}}_{\mathrm{ref}}, \mathbf{y}_{\mathrm{ref}}^{(3)}, \mathbf{y}_{\mathrm{ref}}^{(4)}) \\
		\tau_3 &=\mathrm{func}(\mathbf{x}, \mathbf{y}_{\mathrm{ref}}, \dot{\mathbf{y}}_{\mathrm{ref}}, \ddot{\mathbf{y}}_{\mathrm{ref}}) \\
		\tau_4 &= \mathrm{func}(\mathbf{x}, \mathbf{y}_{\mathrm{ref}}, \dot{\mathbf{y}}_{\mathrm{ref}}, \ddot{\mathbf{y}}_{\mathrm{ref}}).
	\end{align}
\end{subequations}

Bei der simulativen Untersuchung dieses Ansatzes ergibt sich bereits im reinen Vorsteuerungsfall, also ohne Anfangsfehler oder Störungen des Systems, ein Problem mit Singularitäten in den berechneten Stellgrößen. Wenn im Stellgesetz allerdings nicht alle Zustandskomponenten $\mathbf{x}$ vorkommen, sondern nur solche, welche auch Teil des flachen Ausgangs $\mathbf{y}$ und seiner Ableitungen sind, treten keine Singularitäten auf. Eine Simulation dieses Regelungsansatzes ist daher erschwert und kann erst weiter verfolgt werden, wenn dieses Problem gelöst ist.

\subsubsection{Singularitäten in der Nähe von Ruhelagen}
In allen Eingangsgrößen treten bei diesem quasi-statischen Rückführungsentwurf in der Nähe von Ruhelagen Singularitäten auf. Diese ergeben sich aufgrund numerischer Effekte. Beim Einsetzen einer zuvor ermittelten Ruhelage entstehen Definitionslücken: Sowohl der Zähler als auch der Nenner der Eingangsgrößen $\boldsymbol{\tau}$ werden Null. Es ist nicht auszuschließen, dass diese Lücken durch algebraische Manipulation hebbar sind. Allerdings ist eine weitere händische Untersuchung dieses Zusammenhangs mit hohem Aufwand verbunden und wird im Rahmen dieser Arbeit nicht weiter verfolgt. Die CAS-Bibliothek SymPy bietet mittels des Aufrufs \texttt{simplify} allerdings keine Lösung dieses Problems in den Eingangsgrößen. Für eine weitere Analyse dieses Problems eignen sich die einfacheren Terme des Nenners $N_{1,3,4}$ von $\tau_1$, $\tau_3$ und $\tau_4$:
\begin{flalign}
	\begin{split}
	N_{1,3,4} &= s_{2} (- 4 l_{0} pm_{1} \sin{(pm_{3})} + 2 l_{0} pm_{2} \cos{(pm_{3})} + 4 l_{0} qm_{1} \sin{(pm_{3})} + l_{0} s_{2} \sin{(2 pm_{3})}\\
	&+ 4 pm_{1}^{2} \sin{(pm_{3})} - 4 pm_{1} pm_{2} \cos{(pm_{3})}- 4 pm_{1} qm_{1} \sin{(pm_{3})} - 4 pm_{1} qm_{2} \sin{(pm_{3})}\\
	&+ 2 pm_{2} qm_{1} \cos{(pm_{3})} + 2 pm_{2} qm_{2} \cos{(pm_{3})} + 4 qm_{1} qm_{2} \sin{(pm_{3})} - qm_{1} s_{2} \sin{(2 pm_{3})}\\
	&+ qm_{2} s_{2} \sin{(2 pm_{3})}).
	\end{split}
\end{flalign}

Des Weiteren ist die Fragestellung von Interesse, weshalb sich solche Lücken bei der Konstruktion der Trajektorie in den Ruhelagen ergeben.

\subsection{Exact feedforward linearization}
\label{sec:exact_feedforward_lin_control}
Eine Implementierung der in diesem Abschnitt durchgeführten Überlegungen ist unter \cite[flatness\_notebooks/ODE\_flatness\_trajectory\_control\_simulation.ipynb]{SAGithub} zu finden.

Bei der exact feedforward linearization wird statt einer Kompensation der Nichtlinearität mittels Rückführung der gemessenen beziehungsweise simulierten Zustandskomponenten $\mathbf{x}$ wie bei der exakten Eingangs-Ausgangs-Linearisierung die Referenztrajektorie $\mathbf{x_{\text{ref}}}$ eingesetzt \cite{Hagenmeyer2003}.

Heuristisch wird eine Fehlerdynamik der Ordnung zwei für alle Komponenten des Koordinatenvektors $\boldsymbol{\theta} = (p_1, p_2, p_3, q_1, q_2)^T$ (nicht nur solchen, die auch Teil des flachen Ausgangs sind!) angesetzt:
\begin{equation}
	\ddot{\boldsymbol{\theta}} = \ddot{\boldsymbol{\theta}}_{\text{ref}} - \mathbf{c}_1^T \dot{\mathbf{e}} - \mathbf{c}_0^T \mathbf{e}.
\end{equation}

Aus der Zusammensetzung des Zustandsvektors $\mathbf{x} = (\boldsymbol{\theta}, \dot{\boldsymbol{\theta}})^T$ und der eingangsaffinen Zustandsraumdarstellung in Gleichung \eqref{eq:state_space_vector_degree} kann außerdem der Zusammenhang
\begin{equation}
	\ddot{\boldsymbol{\theta}} = \mathbf{f}_{[6, 10]}(\boldsymbol{\theta}) + \mathbf{g}_{[6, 10]}(\boldsymbol{\theta}) \ \boldsymbol{\tau}
\end{equation}

hergestellt werden. Dabei bedeutet die Indizierung $\bullet_{[i, j]}$, die Auswahl der Zeilen $i$ bis $j$ von $\bullet$. Da für den Systemeingang $\boldsymbol{\tau} \in \mathbb{R}^4$ und für die Eingangsmatrix $\mathbf{g}_{[6, 10]} \in \mathbb{R}^{5 \times 4}$ gilt, kann dieser Zusammenhang über die Bildung einer Pseudo-Inversen $\mathbf{g}_{[6, 10]}^+$ nach dem Eingangsvektor aufgelöst werden:
\begin{equation}
	\boldsymbol{\tau}= \mathbf{g}^{+}_{[6, 10]} (\boldsymbol{\theta}) \ (\ddot{\boldsymbol{\theta}}_{\text{ref}} - \mathbf{c}_{1} \mathbf{\dot{e}} - \mathbf{c}_{0} \mathbf{e} - \mathbf{f}_{[6, 10]}(\boldsymbol{\theta})).
\end{equation}

Durch Einsetzen der Referenztrajektorien der Koordinaten $\boldsymbol{\theta}_{\text{ref}}$ in $\mathbf{g}_{[6, 10]}^+(\boldsymbol{\theta})$ und $\mathbf{f}_{[6, 10]}(\boldsymbol{\theta})$ wird die exact feedforward linearization realisiert:
\begin{equation}
\label{eq:control_law__ff_lin_pseudo}
\boldsymbol{\tau}= \mathbf{g}^{+}_{[6, 10]} (\boldsymbol{\theta}_{\text{ref}}) \ (\ddot{\boldsymbol{\theta}}_{\text{ref}} - \mathbf{c}_{1} \mathbf{\dot{e}} - \mathbf{c}_{0} \mathbf{e} - \mathbf{f}_{[6, 10]}(\boldsymbol{\theta}_{\text{ref}})).
\end{equation} 

Abbildung \ref{fig_feedforward_pseudo_controller_initial_error} zeigt prototypische Trajektorien beim Übergang zwischen zwei Ruhelagen mit einem auszuregelnden Anfangsfehler für diesen Regelungsansatz.

\begin{figure}[H]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=1]{Pictures/feedforward_lin_pseudo_controller_initial_error}
	\end{center}
	\caption[Trajektorien Ruhelagenüberführung mit Regelung über exact feedforward linearization (Pseudoinverse)]
	{Prototypische Trajektorien des Doppelkransystems bei der Überführung zwischen zwei Ruhelagen unter der Ausregelung von Anfangsfehlern über die exact feedforward linearization mit Pseudoinverser. Koordinatenbezeichnung entsprechend Abbildung \ref{fig:double_crane_diagram}.}
	\label{fig_feedforward_pseudo_controller_initial_error}
\end{figure}

\subsubsection{Vereinfachung mittels Ausgangsselektion}
Statt der Nutzung einer Pseudo-Inversen wie in Gleichung \eqref{eq:control_law__ff_lin_pseudo} wird im Folgenden eine Selektion von vier der fünf Gleichungen der Beschleunigungen $\ddot{\boldsymbol{\theta}}$ vorgenommen. Symbolisch wird dies über eine Selektionsmatrix $\mathbf{S}$ dargestellt:
\begin{equation}
	\mathbf{S} \cdot \ddot{\boldsymbol{\theta}} = \mathbf{S} \cdot (\ddot{\boldsymbol{\theta}}_{\text{ref}} - \mathbf{c}_1^T \dot{\mathbf{e}} - \mathbf{c}_0^T \mathbf{e}) = \mathbf{S} \cdot \mathbf{f}_{[6, 10]}(\boldsymbol{\theta}) + \mathbf{S} \cdot \mathbf{g}_{[6, 10]}(\boldsymbol{\theta}) \ \boldsymbol{\tau}.
\end{equation} 

Durch die Wahl der letzten vier Gleichungen kann eine direkte Inversion der somit quadratischen Eingangsmatrix $\mathbf{g}_{[7, 10]} = \mathbf{S} \cdot \mathbf{g}_{[6, 10]}$ erfolgen:
\begin{equation}
	\boldsymbol{\tau}= \mathbf{g}^{-1}_{[7, 10]}(\boldsymbol{\theta}_{\text{ref}}) \cdot \mathbf{S} \cdot (\ddot{\boldsymbol{\theta}}_{\text{ref}} - \mathbf{c}_{1} \mathbf{\dot{e}} - \mathbf{c}_{0} \mathbf{e} - \mathbf{f}_{[6, 10]}(\boldsymbol{\theta}_{\text{ref}})) \text{ mit } 
	\mathbf{S} = 
	\begin{pmatrix}
	0 & 1 & 0 & 0 & 0 \\
	0 & 0 & 1 & 0 & 0 \\
	0 & 0 & 0 & 1 & 0 \\
	0 & 0 & 0 & 0 & 1 \\
	\end{pmatrix}.
\end{equation}

Diese Berechnungsvorschrift der Stellgrößen enthält deutlich weniger Operationen als alle zuvor dargestellten Ansätze. Damit eignet sie sich insbesondere für eine spätere Implementierung auf einem Echtzeitsystemen sowie sehr viel kürzeren Simulationszeiten. Abbildung \ref{fig_feedforward_selec_controller_initial_error} zeigt, dass sich für Beispieltrajektorien mit Anfangsfehlern ebenso wie bei den vorherigen Ansätzen ein sehr gutes Folgeverhalten sowie stationäre Genauigkeit ergibt.

Auf die Darstellung konkreter symbolischer Ausdrücke für die Stellgesetze wird aus Platz- und Praktikabilitätsgründen dennoch verzichtet, da jede Eingangskomponente trotzdem mehr als einhundert Rechenoperationen beinhaltet. Stattdessen wird auf das zu Beginn dieses Abschnitts \ref{sec:exact_feedforward_lin_control} erwähnte Jupyter-Notebook verwiesen. Übersichtlicher ist an dieser Stelle eine Angabe von funktionalen Abhängigkeiten:
\begin{subequations}
	\begin{align}
		\tau_1 &= \mathrm{func}(\mathbf{x}, \boldsymbol{\theta}_{\mathrm{ref}}, \dot{\boldsymbol{\theta}}_{\mathrm{ref}}, \ddot{\boldsymbol{\theta}}_{\mathrm{ref}}) \\
		\tau_2 &= \mathrm{func}(\mathbf{x}, \boldsymbol{\theta}_{\mathrm{ref}}, \dot{\boldsymbol{\theta}}_{\mathrm{ref}}, \ddot{\boldsymbol{\theta}}_{\mathrm{ref}}) \\
		\tau_3 &= \mathrm{func}(\mathbf{x}, \boldsymbol{\theta}_{\mathrm{ref}}, \dot{\boldsymbol{\theta}}_{\mathrm{ref}}, \ddot{\boldsymbol{\theta}}_{\mathrm{ref}}) \\
		\tau_4 &= \mathrm{func}(\mathbf{x}, \boldsymbol{\theta}_{\mathrm{ref}}, \dot{\boldsymbol{\theta}}_{\mathrm{ref}}, \ddot{\boldsymbol{\theta}}_{\mathrm{ref}}).
	\end{align}
\end{subequations}

\subsubsection{Stabilitätsbetrachtung}
Im Folgenden wird die Simulation einer prototypischen Referenztrajektorie mit dem zuletzt vorgestellten Regelungsansatz betrachtet. Die Eigenwerte der Jacobimatrix $\mathbf{J}_{\dot{\mathbf{e}}}$ einer Fehlerdynamik
\begin{align}
	\mathbf{e} &:= \mathbf{x} - \mathbf{x}_{\mathrm{ref}} \Leftrightarrow \mathbf{x} = \mathbf{e} + \mathbf{x}_{\mathrm{ref}} \\
	\dot{\mathbf{e}} &= \dot{\mathbf{x}} - \dot{\mathbf{x}}_{\mathrm{ref}} = \mathbf{f}(\mathbf{e} + \mathbf{x}_{\mathrm{ref}}) + \mathbf{g}(\mathbf{e} + \mathbf{x}_{\mathrm{ref}}) \boldsymbol{\tau} - \dot{\mathbf{x}}_{\mathrm{ref}} \\
	\mathbf{J}_{\dot{\mathbf{e}}} &= \partiell{\dot{\mathbf{e}}}{\mathbf{e}}
\end{align}
sind für eine Stabilitätsbetrachtung von Interesse. Abbildung \ref{fig_feedforward_selec_controller_ljapunov1} zeigt, dass diese Eigenwerte in diesem Fall im Zeitraum von 5 $\si{s}$ bis 9 $\si{s}$ einen positiven Realteil aufweisen. Es ist möglich, dass aufgrund des bis dahin bereits stark abgeklungenen Folgefehlers keine ausreichende Destabilisierung des Systems stattfindet, sondern eine stationäre Genauigkeit dennoch erreicht wird. Bis zum Ende der Simulation weisen alle Eigenwerte erneut einen negativen Realteil auf. Formal kann allerdings bereits am Beispiel einer möglichen Referenztrajektorie mit Ljapunows erster (indirekter) Methode gezeigt werden, dass dieser Regelungsansatz zu einem instabilen System zu gewissen Simulationszeitpunkten führt \cite[Vorlesung 4]{NLRT_Winkler2020}. Eine andere Wahl der Rückführung, etwa ohne lineare Dynamik, könnte dieses Problem lösen.

\begin{figure}[ht]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=1]{Pictures/feedforward_lin_selec_ljapunov1}
	\end{center}
	\caption[Eigenwerte der Jacobimatrix bei Trajektorienfolge mit Regelung über exact feedforward linearization (Selektionsmatrix)]
	{Eigenwerte der Jacobimatrix $\mathbf{J}_{\dot{\mathbf{e}}}$ bei der Folge einer prototypischen Referenztrajektorie bei der Regelung über exact feedforward linearization mit Selektionsmatrix.}
	\label{fig_feedforward_selec_controller_ljapunov1}
\end{figure}

\begin{figure}[ht]
	\begin{center}
		% hier keine Skalierung notwendig, wenn Datei schon mit passender figsize angelegt wurde:
		\includegraphics[scale=1]{Pictures/feedforward_lin_selec_controller_initial_error}
	\end{center}
	\caption[Trajektorien Ruhelagenüberführung mit Regelung über exact feedforward linearization (Selektionsmatrix)]
	{Prototypische Trajektorien des Doppelkransystems bei der Überführung zwischen zwei Ruhelagen unter der Ausregelung von Anfangsfehlern über die exact feedforward linearization mit Selektionsmatrix. Koordinatenbezeichnung entsprechend Abbildung \ref{fig:double_crane_diagram}.}
	\label{fig_feedforward_selec_controller_initial_error}
\end{figure}

\chapter{Fazit und Ausblick}
\section{Fazit}
Für das zu untersuchende Brückenkransystem wurden analytische nichtlineare Modelle unter Nutzung des Lagrange-Formalismus ermittelt. Diese ergaben sich für die LG erster Art zu DGL- und für die LG zweiter Art zu DAE-Systemen. Für eine bessere Nachvollziehbarkeit der zugrunde liegenden Methodik wurde dieses Vorgehen zunächst anhand eines Einzelkransystems durchgeführt. Es erfolgte eine Identifikation aller zumeist geometrischen Modellparameter.

Die DGL-Modelle von Einzel- und Doppelkransystem wurden auf differenzielle Flachheit untersucht. Dabei wurde eine systematische Vorgehensweise für Mehrgrößensysteme skizziert. Dieses konnte auf Gleichungsebene anhand des Einzelkransystems veranschaulicht werden. Für das Doppelkransystem wurde aus Platz- und Praktikabilitätsgründen auf eine explizite Darstellung der umfangreichen Ausdrücke in den Ergebnissen verzichtet. Unter Zuhilfenahme von Computeralgebrasystemen war eine Beschreibung dieser Zusammenhänge sowie Darstellung funktionaler Abhängigkeiten möglich.

Auf Grundlage des für das Doppelkransystem bestimmten flachen Ausgangs konnten polynombasierte Trajektorien der Ausgangskomponenten aufgestellt werden. Diese dienen der Überführung des Systems von einer gegebenen Ruhelage in eine andere. Auf Basis der Parametrisierung der Eingangskomponenten durch den flachen Ausgang war es möglich daraus Stellgrößenverläufe für eine Vorsteuerung abzuleiten. Zur Folgeregelung ist eine statische Rückführung aufgrund eines nicht wohldefinierten vektoriellen relativen Grades nicht möglich. Stattdessen konnte durch eine dynamische Rückführung mit linearen Fehlerdynamiken eine Stabilisierung des Systems bei Anfangsfehlern sowie Einschwingen entlang der Solltrajektorie erzielt werden, allerdings in Verbindung mit einem hohen Komplexitätsgrad des Stellgesetzes. Der Ansatz einer quasi-statischen Rückführung mündete aufgrund von Singularitäten in der Nähe von Ruhelagen in numerischen Problemen. Diese konnten im Rahmen dieser Arbeit nicht behoben werden. Mittels der exact feedforward linearization wurde alternativ ein Regelungsansatz verfolgt, aus welchem ein kompaktes Stellgesetz folgt. Dafür wurde eine kleinere Ordnung der linearen Fehlerdynamiken angenommen sowie alle Komponenten oder auch nur eine heuristische Selektion der Zustandskomponenten mit diesen Fehlerdynamiken versehen. Dieser Ansatz eignete sich während praktischer Untersuchungen ebenso zur Stabilisierung des Systems bei Anfangsfehlern, verstößt aber gegen formale Stabilitätsbedingungen.

Die Durchführung umfangreicher symbolischer Berechnungen wie auch die numerisch simulative Verfikation der ermittelten Steurungs- und Regelungsgesetze erfolgte über Jupyter-Notebooks in Python. Über eine Robustheit der Regelungsansätze wurde keine Aussage getroffen. Gerade bei nichtlinearen Systemen wie dem in dieser Arbeit untersuchten können bereits geringe Modellabweichungen zur Instabilität bei Regelungsansätzen der exakten Linearisierung führen, woraus hohe Genauigkeitsanforderungen für die Modellbildung folgen.

\section{Ausblick}

Für die Untersuchung der Eignung der ermittelten Regelungsansätze am realen Demonstratorsystem ist eine Implementierung auf der vorhandenen Hardware der Raspberry Pis notwendig. Gerade die Einhaltung von Anforderungen an die Echtzeitfähigkeit bei numerisch umfangreichen Stellgesetzen stellt dabei eine Herausforderung dar.

Die flachheitsbasierte Vorsteuerung kann zuerst allein erprobt werden, so dass auch aus Betrachtung der Abweichung von Ist- und Referenztrajektorien auf die Größenordnung der Modellabweichungen geschlossen werden kann. Die Regelungsansätze sollten daraufhin unter Begrenzung von Stellgrößen und Überwachung des gegebenenfalls instabil werdenden Systems getestet werden.

Neben einer vertieften Auseinandersetzung mit der quasi-statischen Rückführung, bei der Singularitäten in den Stellgesetzen gegebenenfalls durch die Hebung von Definitionslücken vermieden werden könnten, verspricht auch die Nutzung moderner Regelungsansätze aus dem Gebiet des maschinellen Lernens kompaktere sowie robuste Lösungen. Über das sogenannte bestärkende Lernen (englisch reinforcement learning) können sich Agenten für den Übergang zwischen Ruhelagen selbstständig eine Strategie aneignen. Ein Transferlernen aus Stelltrajektorien klassischer Regelungsansätze auf die Agenten wäre zudem denkbar.

Eine Präzisierung des physikalischen Modells durch Einbeziehung von Reibungseffekten könnte vor allem die Effektivität der daraus abgeleiteten Vorsteuerung weiter verbessern. Allerdings ergibt bereits das einfachere aktuelle Modell bei einem flachheitsbasiertem Vorgehen äußerst umfangreiche Terme für die Stellgrößen, so dass die Anpassung zuvor darauf trainierter Agenten über beispielsweise bestärkendes Lernen eine kompaktere Lösung ergeben könnte.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "ArbeitRST"
%%% End:
